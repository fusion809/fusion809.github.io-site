<!DOCTYPE html>
<html>

  <head>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/my.css" rel="stylesheet">
  <link href="/css/custom-font.css" rel="stylesheet">
  <link href="/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/colors.css">
  <link href="https://fusion809.github.io/ttf/font-mfizz-2.3.0/dist/font-mfizz.css" rel="stylesheet">
  <link href="https://fusion809.github.io/images/favicon.png" rel="shortcut icon" type="image/png" >
  <script src="/js/jquery-1.12.4.js" type="text/javascript"></script>
  <script src="/js/jquery-ui.js" type="text/javascript"></script>
  <script src="/js/jquery.easyListSplitter.js" type="text/javascript"></script>
  <script src="/js/columnize-list.js" type="text/javascript"></script>
  <script src="/js/toc.js" type="text/javascript"></script>
  <title>Package Management on Sabayon Linux</title>
  </head>

  <body>

    <header class="site-header">
  <div class="wrapper">

  <i class="fa fa-linux site-title" style="font-size: 40px;" aria-hidden="true"></i><a class="site-title" style="font-size: 40px;" href="/">The Hornery</a>

  <nav class="site-nav">
    <a href="#" class="menu-icon">
      <svg viewBox="0 0 18 15">
        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
      </svg>
    </a>
    <div class="trigger">
    <div class="pages-nav">Information Pages</div>
      
        
        <a class="page-link" href="/about/">About</a>
        
      
        
        <a class="page-link" href="/about-me/">About Me</a>
        
      
        
        <a class="page-link" href="/contributing/">Corrections</a>
        
      
        
        <a class="page-link" href="/copyright/">Copyright</a>
        
      
        
        <a class="page-link" href="/glossary/">Glossary</a>
        
      
        
        <a class="page-link" href="/repositories/">Repositories</a>
        
      
    </div>
  </nav>

</div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Package Management on Sabayon Linux</h1>
    <p class="post-meta">
      <br/>
      <!--<span itemprop="categories"><b>Category(s)</b>: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag"><a href="/tag/sabayon/" link="_blank">sabayon</a></span><span class="tag"><a href="/tag/package-management/" link="_blank">package-management</a></span><span class="tag"><a href="/tag/command-line/" link="_blank">command-line</a></span><br/>-->
      <time datetime="2015-12-24T00:00:00+10:00" itemprop="datePublished"><b>First published</b>: Thursday, 24 December 2015.</time>
      <time datetime="07:21:00 PM, Saturday 13 February 2016 " itemprop="dateModified"><br/><b><abbr title="Note that most modifications past the publication date will be largely cosmetic, like fixing spelling, grammar and links, not necessarily updating the content itself.">Last modified</abbr></b>: &nbsp;&nbsp;&nbsp;07:21 PM Saturday, 13 February 2016 (<abbr title="Australian Eastern Standard Time, or UTC+10">AEST</abbr>).</time>
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div id="toc"></div>

    
    
<div class="note">

<div class="note-title">NOTE</div>
<ul>
  <li>
    <p><em>This post contains links to external resources, which I have little, if any, control over and hence I cannot guarantee their accuracy.</em></p>
  </li>
  <li>
    <p><em>Any instruction involving Portage or manual installation from source code, has the capability to break your system and cause other problems, so if you follow them you and you alone assume any and all responsibility for the consequences!</em></p>
  </li>
</ul>


</div>

<p>Often, on this blog, I write posts regarding installing software with Sabayon’s two package managers: <strong>Portage</strong> which it borrows from Gentoo and <strong>Entropy</strong> which is wholly original. I felt I would dedicate this post to both package managers, giving you some tips on how to use them safely and most efficiently. Generally speaking when it comes to Sabayon, unless you know what you are doing (for future reference users that “know what they are doing” in this context will be referred to as <em>competent Sabayon users</em>), you are recommended to only use Entropy as your <strong>package management system</strong> (<strong>PMS</strong>), as working with Portage is more risky and mixing Entropy with Portage is known to sometimes lead to system breaks. I mix the two, even though I have no formal training in anything technology-related and I have only been using Sabayon since July/August 2015 and had no experience before this with Gentoo Linux or Gentoo-based distributions like Calculate Linux.</p>

<p>This post will cover some of the basics of using Entropy and Portage individually and how to use them together, in the safest way possible. It will also cover other related topics like using Layman to add overlays and the basics on how to write ebuilds. You will probably notice that the command-line is featured heavily in this article, with little mention (usually all they will get is about a sentence mention each, if they are really notable) of graphical user interface (GUI) front-ends for these programs, this is because I tend to find command-line front-ends for package managers are more stable than their graphical counterparts.</p>

<h2 id="glossary">Glossary</h2>
<p>To ensure that everything in this post is clear as day to understand I felt I should explain some <a href="#acronyms">acronyms</a>, <a href="#terminology">terminology</a> and <a href="#formatting">formatting conventions</a> adopted in this post.</p>

<h3 id="acronyms">Acronyms</h3>
<p>The acronyms used in this post include:</p>

<ul>
  <li><strong>CLI</strong>: <b>c</b>ommand-<b>l</b>ine <b>i</b>nterface. Which is usually accessed on Sabayon via terminal emulators.</li>
  <li><strong>GPO</strong>: <b>G</b>entoo <b>P</b>ortage <b>o</b>verlay.</li>
  <li><strong>GUI</strong>: <b>g</b>raphical <b>u</b>ser <b>i</b>nterface.</li>
  <li><strong>PMS</strong>: <b>p</b>ackage <b>m</b>anagement <b>s</b>ystem.</li>
  <li><strong>PT</strong>: <b>P</b>ortage <b>T</b>ree, the main official overlay of the Gentoo Foundation.</li>
</ul>

<h3 id="formatting">Formatting</h3>
<p>Angle brackets <code class="highlighter-rouge">&lt;</code> and <code class="highlighter-rouge">&gt;</code> with a word between them denotes user-provided variables. For example, <code class="highlighter-rouge">&lt;PACKAGE&gt;</code> denotes the name of a software package, <code class="highlighter-rouge">&lt;OVERLAY&gt;</code> denotes the name of a software overlay, <code class="highlighter-rouge">&lt;FILE&gt;</code> is the name of a file, including its extension (e.g., it may equal <code class="highlighter-rouge">atom-1.3.2.ebuild</code>, when are referring to ebuild files), <em>etc.</em> <code class="highlighter-rouge">This</code> formatting denotes pieces of code, file paths or file extensions, while <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)"><code class="highlighter-rouge">this</code></a> formatting denotes pieces of code/file paths for which I have provided a hyperlink. <code><span class="codeu">user $</span></code> means that code that follows, that is on the same line, are to be run as standard user (as opposed to superuser, or root). <code><span class="coder">root #</span></code> indicates that the code that follows, that is on the same line, is to entered into a instance of Bash with root privileges.</p>

<h3 id="terminology">Terminology</h3>

<h4 id="bandwidth">Bandwidth</h4>
<p>This is a term I am using to mean data transferred via a network, such as the Internet. Although this definition may not be strictly correct, see for example its <a href="https://en.wikipedia.org/wiki/Bandwidth_(computing)">Wikipedia article</a>.</p>

<h4 id="bash"><a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a></h4>
<p>The <strong>Bourne-Again Shell</strong> that is developed as part of the GNU Project, is the default command shell of Sabayon Linux and most other Linux distributions (including Gentoo Linux). It is covered in greater detail, by the <a href="../../../11/26/bash-scripting-and-the-command-line-an-introduction-for-sabayon-users"><em>Bash Scripting and the Command-Line: an Introduction for Sabayon Users</em></a> post.</p>

<h4 id="binary-package">Binary package</h4>
<p>A type of <a href="#software-package">software package</a> that contains an executable script that is ready to be run. They are usually produced from pre-compiled source code. Most package managers work with binary packages, example of package managers that work with binary packages by default, include:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Advanced_Packaging_Tool">APT</a>, the default command-line package manager used by Debian-based distributions, including Ubuntu. APT uses <a href="https://en.wikipedia.org/wiki/Deb_(file_format)"><strong>Deb packages</strong></a> which have the <code class="highlighter-rouge">.deb</code> file extension. Deb packages are installed using dpkg (<code class="highlighter-rouge">dpkg</code>), although APT (<code class="highlighter-rouge">apt</code>) provides dependency resolution, repository management, package querying, <em>etc.</em> and uses <code class="highlighter-rouge">dpkg</code> to perform the actual package installation. Deb packages can be unpacked using the command <code class="highlighter-rouge">ar -xv &lt;PACKAGE&gt;</code> (<a href="/man/ar.1p.html"><code class="highlighter-rouge">ar</code></a> is provided by <a href="http://en.wikipedia.org/wiki/GNU_Binutils">GNU Binutils</a>). They contain a metadata tarball called <code class="highlighter-rouge">control</code> that can be left uncompressed, gzipped or xzipped, yielding the file names <code class="highlighter-rouge">control.tar</code>/<code class="highlighter-rouge">control.tar.gz</code>/<code class="highlighter-rouge">control.tar.xz</code>, binary package data (including installable files) tarball (which can be compressed with <a href="https://en.wikipedia.org/wiki/Gzip">gzip</a> (making the file extension <code class="highlighter-rouge">.tar.gz</code>), <a href="https://en.wikipedia.org/wiki/Bzip2">bzip2</a> (<code class="highlighter-rouge">.tar.bz2</code>), <a href="https://en.wikipedia.org/wiki/Xz">xzip</a> (<code class="highlighter-rouge">.tar.xz</code>) or <a href="https://en.wikipedia.org/wiki/Lempel-Ziv-Markov_chain_algorithm">lzma</a> (<code class="highlighter-rouge">.tar.lzma</code>)) and <code class="highlighter-rouge">debian-binary</code> (which contains the Debian format version number, currently the latest version is 2.0).</li>
  <li><a href="https://en.wikipedia.org/wiki/APT-RPM">APT-RPM</a>, the default command-line package manager used by OpenMamba and PCLinuxOS. It is a version of APT that has been specifically modified to work with <a href="https://en.wikipedia.org/wiki/RPM_Package_Manager"><strong>RPM packages</strong></a>. RPM packages can be decompressed (or unpacked) using <code class="highlighter-rouge">bsdtar</code>, namely by running: <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span>  bsdtar -xf &lt;PACKAGE&gt;</span>
.</li>
  <li><a href="https://en.wikipedia.org/wiki/DNF_(software)">DNF</a>, which is the default package manager of Fedora ≥22. It uses <strong>RPM packages</strong> (with the <code class="highlighter-rouge">.rpm</code> file extension).</li>
  <li><a href="https://en.wikipedia.org/wiki/Entropy_(package_manager)">Entropy</a> is the default package manager of Sabayon and uses <code class="highlighter-rouge">.tbz2</code> binaries, the same type of binaries that Portage packages software as.</li>
  <li><a href="https://en.wikipedia.org/wiki/Yellowdog_Updater,_Modified">yum</a>, the default package manager of CentOS, Fedora &lt;22 and Red Hat Enterprise Linux, which also uses <strong>RPM packages</strong>.</li>
  <li><a href="https://en.wikipedia.org/wiki/ZYpp">ZYpp</a>, the default command-line package manager of openSUSE and SUSE Linux Enterprise, which also works with <strong>RPM packages</strong>.</li>
</ul>

<h4 id="metadata">Metadata</h4>
<p>Metadata is essentially information (or data) about data. Software package metadata may contain details about when the package was built, who built the package, the features of the package, maybe a description, its web page, <em>etc.</em></p>

<h4 id="software-package"><a href="https://en.wikipedia.org/wiki/Package_manager">Software package</a></h4>
<p>A distribution of software and data contained in archive files, that can be used by package managers to install software.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> There are two main types of software package: <a href="#binary-package">binary</a> and <a href="#source-code-package">source code</a>, which are both covered separately.</p>

<h4 id="source-code-package">Source code package</h4>
<p>A type of <a href="#software-package">software package</a> that contain raw software source code which must be configured and compiled before an executable script is generated that can be run, as opposed to <a href="#binary-package">binary packages</a> which contain an executable script that can be immediately run. The best example Linux package manager that works with source code packages by default is <a href="https://en.wikipedia.org/wiki/Portage_(software)">Portage</a>.</p>

<h2 id="preliminaries">Preliminaries</h2>
<p>Entropy, Layman and Portage are all written in Python, Bash script and to smaller extents other programming languages like C. <a href="#entropy">Entropy</a> is maintained by Fabio Erculiani and other developers of Sabayon, while <a href="#layman">Layman</a> and <a href="#portage">Portage</a> are both maintained by the Gentoo community. This section will cover some of the preliminary information for each of these programs, including their command-line syntax, so as to make the rest of this post easier to understand.</p>

<h3 id="portage">Portage</h3>
<div class="image-box" style="width:1100px; float: none;">
<figure>
  <img src="https://fusion809.github.io/images/Package-Managers/GTK-based-Portage-front-end-Porthole.png" alt="Screenshot of Porthole running under KDE Plasma 5" style="width:1100px" />
  
    <figcaption align="bottom" style="width:-webkit-calc(1100px-5px); float: none;"><p>Screenshot of Porthole running under KDE Plasma 5</p>
</figcaption>
  
</figure>
</div>

<p><b>Portage</b> (<span class="package">sys-apps/portage</span>: <a href="https://packages.sabayon.org/quicksearch?q=sys-apps/portage&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/sys-apps/portage" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/sys-apps/portage" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://wiki.gentoo.org/wiki/Portage" link="_blank"><abbr title="Gentoo Wiki">GW</abbr></a>, <a href="https://wiki.sabayon.org/index.php?title=En:Portage" link="_blank"><abbr title="Sabayon Wiki">SW</abbr></a>, <a href="https://en.wikipedia.org/wiki/Portage_(software)" link="_blank"><abbr title="Wikipedia">WP</abbr></a>)
 is a package management system that is arguably the most powerful Linux PMS available today. It is written in <a href="https://en.wikipedia.org/wiki/Python_(programming_language)">Python</a> and <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a> script, so as to afford users the ability to script with Portage. Portage installs, removes and upgrades software using the instructions contained in a specialized type of Bash script known as an <a href="#ebuild"><strong>ebuild</strong></a>. The <code class="highlighter-rouge">sys-apps/portage</code> package provides the executable commands listed below. Each are hyperlinked to their respective manpage, if they have one. You can replicate this list using <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span>  equery files sys-apps/portage | grep /usr/bin</span>.
 You can show all the manpages associated with <code class="highlighter-rouge">sys-apps/portage</code> with (assuming the <a href="#gentoolkit">Gentoolkit</a> is installed): <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span>  equery files sys-apps/portage | grep /usr/share/man</span>.</p>

<ul>
  <li><a href="/man/ebuild.1.html"><code class="highlighter-rouge">ebuild</code></a></li>
  <li><a href="/man/egencache.1.html"><code class="highlighter-rouge">egencache</code></a></li>
  <li><a href="/man/emerge.1.html"><code class="highlighter-rouge">emerge</code></a></li>
  <li><code class="highlighter-rouge">emerge-webrsync</code></li>
  <li><a href="/man/emirrordist.1.html"><code class="highlighter-rouge">emirrordist</code></a></li>
  <li><code class="highlighter-rouge">portageq</code></li>
  <li><a href="/man/quickpkg.1.html"><code class="highlighter-rouge">quickpkg</code></a></li>
  <li><a href="/man/repoman.1.html"><code class="highlighter-rouge">repoman</code></a></li>
</ul>

<p>Portage affords users this extra control via <strong>USE flags</strong>, which are “keywords that embodies support and dependency-information for a certain concept” (quoted from the <a href="https://wiki.gentoo.org/wiki/Handbook:X86/Working/USE">Gentoo Handbook</a>), in other words they are keywords that allow users to decide which (if any) optional package features (like language bindings, for example) will be built, when the package itself is built. These USE flags can be enabled or disabled for individual packages (via modifying files in the directory <code class="highlighter-rouge">/etc/portage/package.use</code>) or for all packages (via editing the <code class="highlighter-rouge">USE="...</code> line in <a href="/man/make.conf.5.html"><code class="highlighter-rouge">/etc/portage/make.conf</code></a>). USE flags should not be confused with <strong>package keywords</strong> (individual package keywords can be found in the directory <code class="highlighter-rouge">/etc/portage/package.keywords</code>, editing keywords for all packages can be done by editing the <code class="highlighter-rouge">ACCEPT_KEYWORDS="..."</code> line in <code class="highlighter-rouge">/etc/portage/make.conf</code>), which are entirely separate keywords, that detail architecture support (x86_64 vs. x86) and a few other features. Likewise packages you do not want Portage to emerge under any circumstances (which can be called <strong>masked packages</strong>) can be added to files within the directory <code class="highlighter-rouge">/etc/portage/package.mask</code>.</p>

<p>Portage is traditionally a <strong>command-line package management system</strong> (invoked by the command <code class="highlighter-rouge">emerge</code>), with no official graphical front-ends available, but a few unofficial graphical front-ends exist in the PT, of which the most popular is probably the GTK+ based <a href="http://porthole.sourceforge.net/" link="_blank"><b>Porthole</b></a> (<span class="package">app-portage/porthole</span>: <a href="https://packages.sabayon.org/quicksearch?q=app-portage/porthole&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/app-portage/porthole" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/app-portage/porthole" link="_blank"><abbr title="Portage Tree">PT</abbr></a>)</p>

<p>The PT contains over 18,750 software packages, as of December 2015, and while this may seem like quite a fair number (which it is) there will always be some people that will want to install software that is not in the PT. To do this it is advisable to search the <a href="http://gpo.zugaina.org/">GPO website</a>, for the package you would like and then add the overlay that contains the package you want with <strong>Layman</strong>.</p>

<h4 id="emerge-syntax">Emerge Syntax</h4>
<p>According to <strong>Portage’s Manpage</strong><sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>, emerge commands have the following format:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge [<em>options</em>] [<em>action</em>] [<em>ebuild</em> | <em>tbz2file</em> | <em>file</em> | <em>@set</em> | <em>atom</em>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span style="background-color: #c4c4ff; color: red; font-style: italic;">(1)</span></div>

<p>This can be confusing to users not familiar with the formatting used by Gentoo’s Manpages (or Linux Manpages in general, for that matter), but I will attempt to explain. Before I do, I need you to get into the mind-frame you had when you first learnt algebra in high school, where variables (like x or y) could be substituted with numbers, letters, other characters or a combination of any, or even all of these. With this mind-frame the above generalized format of emerge commands will make more sense, as all words in that command except for root and emerge can be substituted, depending on what you want to do with Portage.</p>

<p>What is in square-brackets (<code class="highlighter-rouge">[...]</code>) are optional parts of the command (that is, they can be omitted) and when you are writing an actual command you omit the square brackets and substitute the word inside with any of a set of possible values it can take on. Some (not all, I do not even understand them all!) possible values <em>options</em> and <em>action</em> can take on are covered in the tables below. Multiple options can be combined with certain actions, often using the shortened notation. For example, to combine the ask and verbose options when emerging GNU Octave, one can run the shortened form <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  emerge -av sci-mathematics/octave</span>
 or the full-lengthed form <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  emerge –ask –verbose sci-mathematics/octave</span>
. The vertical lines or pipes, as they can also be called, which is <code class="highlighter-rouge">|</code>, in (1) means the options separated by it and between the square brackets are mutually-exclusive options (that is, you either pick one or you pick none, depending on what you want to do). To save time, I will call the following part of (1) "<strong>input</strong>":</p>
<div class="code">[<em>ebuild</em> | <em>tbz2file</em> | <em>file</em> | <em>@set</em> | <em>atom</em>]</div>
<p><strong>Sets</strong> (<code class="highlighter-rouge">@set</code> in the “input”) are essentially a useful way of specifying a large group of packages. There are six sets found in a default install of Sabayon, more can be created by users with root access by them editing files in the directory, <code class="highlighter-rouge">/etc/portage/sets</code>. Running <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  emerge –list-sets</span>
 should list all available sets. <strong>ebuilds</strong> are just the names of packages you want to install. At a bare minimum they should be the package’s name (case-sensitive), without its category (e.g., wordpress for <code class="highlighter-rouge">www-apps/wordpress</code>), but sometimes specifying a package’s name without its category leaves some ambiguity (that is, there may be more than one package in the Portage Tree or unofficial overlays added with Layman, that has the name specified), so it is often safer to specify the category also. Some people may want to specify the specific package version they want too, to do this add an equal sign before the category and specify the package version after the package’s name, for example running <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  emerge =sys-apps/portage-2.2.20</span>
 should install Portage version 2.2.20. <strong>Files</strong> are files that have been created by installed packages. <strong>tbz2file</strong>, as one can probably guess are any binary packages created by emerge itself, in the <code class="highlighter-rouge">.tbz2</code> file format that one wishes to install. Please note, however, that installing tbz2 files by path is deprecated and may not work, if you want to install tbz2 binaries use the <code class="highlighter-rouge">-K</code> option for <code class="highlighter-rouge">emerge</code> and instead specify the package’s Atom as the input for <code class="highlighter-rouge">emerge</code>. <strong>Atoms</strong> (<code class="highlighter-rouge">atom</code>) are essentially the same as ebuilds, only with bounds on their version numbers specified. For example, <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  emerge &lt;dev-lang/python-2.0</span>
 should install the best (but not necessarily the latest) version of Python available before version 2.0.</p>
<table style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;"><caption><strong>Table 1: Options for Emerge</strong></caption>
<tbody>
<tr class="green">
  <td class="title" style="width: 240px;">Long</td>
  <td class="title" style="width: 50px;">Short</td>
  <td class="title">Meaning</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--ask</div>
  </td>
  <td class="green"><code>-a</code></td>
  <td class="green">Ask before running the action.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--autounmask [y|n]</div>
  </td>
  <td class="green">N/A</td>
  <td class="green">This option is enabled by default and it basically allows emerge to unmask packages as required and write changes for package.use. Possible forms this option can take on are <code>--autounmask=y</code>, <code>--autounmask=n</code> (which will disable this option and unmasking/package.use changes will not occur) or <code>--autounmask</code>.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--autounmask-write [y|n]</div>
  </td>
  <td class="green">N/A</td>
  <td class="green">This option is similar to <code>--autounmask</code>, except it can write to package.use and other configuration files directly.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--buildpkg [y|n]</div>
  </td>
  <td class="green"><code>-b</code></td>
  <td class="green">By default this option is disabled, but when enabled it causes emerge to install the package(s) and it also creates binary package(s) from the installed package(s) (file format: <code>.tbz2</code>) in <strong>PKGDIR</strong> (which is specified by <code>/etc/portage/make.conf</code>, by default it is <code>/usr/portage/packages</code>).</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--buildpkgonly</div>
  </td>
  <td class="green"><code>-B</code></td>
  <td class="green">This option, which is not enabled by default, will only create binary package(s) and not install the package(s) specified to it.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--changed-use</div>
  </td>
  <td class="green"><code>-U</code></td>
  <td class="green">Tells emerge to include installed packages where USE flags have changed since installation.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--debug</div>
  </td>
  <td class="green"><code>-d</code></td>
  <td class="green">Show more detailed debugging information.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--deep</div>
  </td>
  <td class="green"><code>-D</code></td>
  <td class="green">With this option emerge will look at the entire (or "deep") dependency tree (not just the immediate dependencies of the package it is emerging, which it does by default) for updates.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--emptytree</div>
  </td>
  <td class="green"><code>-e</code></td>
  <td class="green">Reinstalls package and all deep dependencies.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--keep-going [ y | n ]</div>
  </td>
  <td class="green">N/A</td>
  <td class="green">Continue as much as possible after an error.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--newuse</div>
  </td>
  <td class="green"><code>-N</code></td>
  <td class="green">Reinstall packages that have had their USE flags changed since installation. This option is more comprehensive in the packages it reinstalls than <code>--changed-use</code>.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--nodeps</div>
  </td>
  <td class="green"><code>-O</code></td>
  <td class="green">Installs specified packages, without installing any dependencies. This option may cause package breakage.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--noreplace</div>
  </td>
  <td class="green"><code>-n</code></td>
  <td class="green">Skips packages that are already installed.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--oneshot</div>
  </td>
  <td class="green"><code>-1</code></td>
  <td class="green">It will emerge the package as normal, but will not add the packages to the world file for later updating.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--onlydeps</div>
  </td>
  <td class="green"><code>-o</code></td>
  <td class="green">Install the specified package(s) dependencies, only. This is the emerge equivalent to APT's <code>apt-get build-dep</code>.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--pretend</div>
  </td>
  <td class="green"><code>-p</code></td>
  <td class="green">This option causes emerge to display which packages would have been emerged, had the pretend option not been used.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--quiet [y|n]</div>
  </td>
  <td class="green"><code>-q</code></td>
  <td class="green">This option, although results do vary, should minimize the output provided by emerge.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--update</div>
  </td>
  <td class="green"><code>-u</code></td>
  <td class="green">Updates packages to the best version available (not necessarily the latest, however).</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--usepkg [y|n]</div>
  </td>
  <td class="green"><code>-k</code></td>
  <td class="green">Tells <code>emerge</code> to use binary packages (stored in <code>$PKGDIR</code>), if they are available. Otherwise, if binary packages are unavailable for the required package(s), traditional ebuild installs will instead be used.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--usepkgonly [y|n]</div>
  </td>
  <td class="green"><code>-K</code></td>
  <td class="green">Tells <code>emerge</code> to <b>only</b> use binary packages stored in <code>$PKGDIR</code>. If the required binary packages are not available in <code>$PKGDIR</code> then <code>emerge</code> will fail.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--verbose</div>
  </td>
  <td class="green"><code>-v</code></td>
  <td class="green">This option causes more details to be given from ask and pretend commands. These details include GNU info errors and (for the pretend command) it will print USE flags.</td>
</tr>
<tr class="green">
  <td class="green">
    <div class="code">--with-bdeps [y|n]</div>
  </td>
  <td class="green">N/A</td>
  <td class="green">During dependency calculations, build time dependencies that are not strictly required will be included. For installation actions this defaults to n, while for depclean actions this defaults to y.</td>
</tr>
</tbody>
</table>

<p><br /></p>
<table class="green" style="width: 100%; border: 1px; padding: 1em;"><caption><strong>Table 2: Action values for Emerge</strong></caption>
<tbody>
<tr class="green">
<td class="title" style="width: 130px;">Long</td>
<td class="title" style="width: 50px;">Short</td>
<td class="title" style="width: 50px;"><abbr title="Input-required?">IR</abbr>?</td>
<td class="title" style="width: 670px;">Meaning</td>
</tr>
<tr class="green">
<td class="green">None</td>
<td class="green">N/A</td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">If no action is specified then emerge will merge all packages specified and their dependencies.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--config</div></td>
<td class="green">N/A</td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Run specific configuring processes that must be done after the package is emerged. The best example for this I can provide are the MariaDB and MySQL packages. Configuring these packages is required in order to set up a database with them.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--depclean</div></td>
<td class="green"><code>-c</code></td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Removes packages not associated with any merged package.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--help</div></td>
<td class="green"><code>-h</code></td>
<td style="background-color: red; color: white; text-align: center; vertical-align: middle;">No</td>
<td class="green">Displays some basic syntactic information, although if you really want some documentation for emerge from the command-line use <code>man emerge</code>.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--prune</div></td>
<td class="green"><code>-P</code></td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Remove all but the highest installed version of the package specified.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--regen</div></td>
<td class="green">N/A</td>
<td style="background-color: red; color: white; text-align: center; vertical-align: middle;">No</td>
<td class="green">Causes portage to check and update the dependency cache of all ebuilds in the portage tree.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--resume</div></td>
<td class="green"><code>-r</code></td>
<td style="background-color: red; color: white; text-align: center; vertical-align: middle;">No</td>
<td class="green">Resumes the last merge, if said merge was cancelled due to errors.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--search</div></td>
<td class="green"><code>-s</code></td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Search for packages who's name matches with the supplied case-insensitive string.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--searchdesc</div></td>
<td class="green"><code>-S</code></td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Search the Portage tree for string in package names and descriptions.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--sync</div></td>
<td class="green">N/A</td>
<td style="background-color: red; color: white; text-align: center; vertical-align: middle;">No</td>
<td class="green">Updates all the ebuilds in the Portage Tree. You should do this once a week, at least. The first time you do it, this will take quite some time (potentially up to a few hours). To save time the first time you do this you may wish to run <code>emerge-webrsync</code> which will download the Portage Tree as a tarball.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--unmerge</div></td>
<td class="green"><code>-C</code></td>
<td style="background-color: green; color: white; text-align: center; vertical-align: middle;">Yes</td>
<td class="green">Unmerges (that is, uninstalls) software packages specified.
<strong>WARNING: This command ignores packages that may depend on the unmerged packages.</strong> For a more dependency-conscious and hence safer version of this command use the <code>--depclean</code> or <code>--prune</code> options.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--version</div></td>
<td class="green"><code>-V</code></td>
<td style="background-color: red; color: white; text-align: center; vertical-align: middle;">No</td>
<td class="green">Display the version number of emerge.</td>
</tr>
</tbody>
</table>

<p><br /></p>

<h4 id="tbz2-binaries">tbz2 Binaries</h4>
<p>As previously mentioned <code class="highlighter-rouge">.tbz2</code> is the binary package format used by Portage. It contains a tarball (in <code class="highlighter-rouge">.tar.bz2</code> format) that contains the binary package data (that is, the installed files of the package) and a xpak (with <code class="highlighter-rouge">.xpak</code> file extension) file that contains the package’s metadata, including the USE flags used to generate the package. You can split <code class="highlighter-rouge">.tbz2</code> binaries into these two components by issuing the command (with <code class="highlighter-rouge">app-portage/portage-utils</code> installed):</p>
<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;qtbz2 -s &lt;PACKAGE&gt;</div>

<h4 id="links">Links</h4>
<h5>Handbook</h5>

<ul>
  <li><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Working/Portage">AMD64 Handbook</a></li>
</ul>

<h5>Manpages</h5>

<ul>
  <li><a href="/man/emerge.1.html">EMERGE(1) Manpage</a></li>
  <li><a href="/man/portage.5.html">PORTAGE(5) Manpage</a></li>
</ul>

<h3 id="ebuilds">ebuilds</h3>
<p>As previously mentioned <strong>ebuilds</strong> are specialized Bash scripts that are used by Portage as instructions on how to install, package, uninstall and otherwise work with software packages. Many of the best-tested and scrutinously-analysed ebuilds are contained in the “<strong>Portage Tree</strong>” (PT) which is <code class="highlighter-rouge">/usr/portage</code>, by default. This tree is the official ebuild repository of the Gentoo Foundation and contains a wide range of different ebuilds, you can search this repository online at <a href="https://packages.gentoo.org">packages.gentoo.org</a>). ebuilds in overlays added with <a href="#layman">Layman</a> are added to another location, <code class="highlighter-rouge">/var/lib/layman</code>. Normally Portage installs (or “<em>merges</em>”) software from source code, so as to maximize the control users have over the features their software has, but some ebuilds (which I will henceforth refer to as <strong>binary ebuilds</strong>) in the Portage Tree install software from binary packages instead. ebuilds contain several specialized functions and variables that are unique to ebuilds and not found in other Bash scripts.</p>

<p><strong>Binary ebuilds</strong> usually take binary packages for other Linux distributions (such as <code class="highlighter-rouge">.deb</code> and <code class="highlighter-rouge">.rpm</code> packages for Debian and Fedora, respectively), extract their contents (as these binary packages are essentially just file archives) and move their contents to the appropriate location on one’s system. Quite often when a program is installed using a binary ebuild its performance will not be as good as if it were installed using a standard (source code) ebuild. The natural question is, of course, “Why even use a binary ebuild then?” Well usually it is a matter of time, see if you install a program from source code it will often take substantially longer than installing it from a binary package, even if that binary package was originally built for another Linux distribution. For most packages Gentoo users are assumed to be willing to put up with the extra time it takes to build a software from source code, as if they are not they probably should not be using a source-based distribution like Gentoo in the first place, but for some packages the compiling time is so unbelievably long (potentially taking days or even weeks) that the maintainers of the PT decided to provide a binary ebuild for the package too. Most binary ebuilds that fit this mold have the suffix <code class="highlighter-rouge">-bin</code> in their name to distinguish them from their respective source code ebuilds, an example of such an binary ebuild is <a href="https://packages.gentoo.org/packages/app-emulation/virtualbox-bin"><code class="highlighter-rouge">app-emulation/virtualbox-bin</code></a>
 and its corresponding source code ebuild, <a href="https://packages.gentoo.org/packages/app-emulation/virtualbox"><code class="highlighter-rouge">app-emulation/virtualbox</code></a>.
 Other times a binary ebuild is used because of licensing restrictions that do not allow users to access the source code, so they are forced instead to use binary packages from distributions with official releases of the software available. Examples of such binary ebuilds include <a href="https://packages.gentoo.org/packages/www-client/google-chrome"><code class="highlighter-rouge">www-client/google-chrome</code></a>
 and <a href="https://packages.gentoo.org/packages/media-sound/spotify"><code class="highlighter-rouge">media-sound/spotify</code></a>,
 both of which build their respective software from Debian packages.</p>

<p>ebuilds in overlays, including the Portage Tree, often come with accompanying files. One of these files is called a manifest, which is <strong>mandatory</strong> for all ebuilds but it can be shared by more than one ebuild, provided the ebuilds sharing a manifest are for different versions of the same package. Manifests contain checksums for ebuild(s), the package’s source code and accompanying files, other than itself. Another accompanying file that is sometimes seen (but not all ebuilds have one) is that of metadata.xml, which contains metadata for the package (such as a description, its home page, its maintainer, <em>etc.</em>). Some ebuilds will also come with a ChangeLog, documenting the changes between the different releases of the package. Some ebuilds will need patch files which are usually kept in a <code class="highlighter-rouge">files/</code> subdirectory of the directory in which the ebuild is stored.</p>

<h4 id="ebuild-syntax">ebuild Syntax</h4>
<p><code class="highlighter-rouge">ebuild</code> is also the name of a command used on Gentoo-based systems like Sabayon to create manifests, merge ebuilds, build binary packages from ebuilds, <em>etc.</em> The <code class="highlighter-rouge">ebuild</code> command is included in the <code class="highlighter-rouge">sys-apps/portage</code> package and its syntax is shown below:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;ebuild &lt;FILE&gt; &lt;COMMAND&gt;</div>

<p>where <code class="highlighter-rouge">&lt;FILE&gt;</code> is the ebuild file you are running the <code class="highlighter-rouge">ebuild</code> command on, while <code class="highlighter-rouge">&lt;COMMAND&gt;</code> is any one of the commands listed in table 3. Note, however, that several commands can be used in the same line.</p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;">
  <caption><strong><p>Table 3: Basic commands for ebuild</p>
</strong></caption>
  <tbody>
    <tr class="green">
    
      <td class="title"><p>Command</p>
</td>
    
      <td class="title"><p>Meaning</p>
</td>
    
      <td class="title"><p>Example(s)</p>
</td>
    
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">clean</code></p>
</td>
      <td class="green"><p>Cleans the temporary build directory for this ebuild.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild clean</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">compile</code></p>
</td>
      <td class="green"><p>Compile the ebuild following the instructions in the <code class="highlighter-rouge">src_compile()</code> function.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild compile</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">config</code></p>
</td>
      <td class="green"><p>Perform post-installation configuration specified in the <code class="highlighter-rouge">pkg_config()</code> function.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild mysql-5.6.27-r1.ebuild config</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">configure</code></p>
</td>
      <td class="green"><p>Configure the source code in the ${S} directory, by running the <code class="highlighter-rouge">src_configure()</code> function. Supported for EAPI ≥2.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild configure</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">digest</code>/<br /><code class="highlighter-rouge">manifest</code></p>
</td>
      <td class="green"><p>Produce a manifest for the ebuild.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild digest</code> <br /><strong>or</strong> <br /><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild manifest</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">fetch</code></p>
</td>
      <td class="green"><p>Checks if the sources specified in <code class="highlighter-rouge">SRC_URI</code> are available in <code class="highlighter-rouge">DESTDIR</code>. If they are not available in <code class="highlighter-rouge">DESTDIR</code>, an attempt is made to download them.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild fetch</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">help</code></p>
</td>
      <td class="green"><p>Shows condensed form of the ebuild(1) manpage, with information specified to the package specified.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild help</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">install</code></p>
</td>
      <td class="green"><p>Installs the package to the temporary install directory by running the <code class="highlighter-rouge">src_install()</code> function. This will <strong>not</strong> install the package into your local filesystem, however.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild install</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">merge</code></p>
</td>
      <td class="green"><p>Run the <code class="highlighter-rouge">fetch</code>, <code class="highlighter-rouge">unpack</code>, <code class="highlighter-rouge">compile</code>, <code class="highlighter-rouge">install</code> and <code class="highlighter-rouge">qmerge</code> functions, which should install the package into your live file system.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild merge</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">package</code></p>
</td>
      <td class="green"><p>Essentially the equivalent to the <code class="highlighter-rouge">merge</code> command, except without installation into the live file system, rather the package is turned into a <code class="highlighter-rouge">.tbz2</code> binary and stored in <code class="highlighter-rouge">$PKGDIR</code> (usually <code class="highlighter-rouge">/usr/portage/packages</code>).</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild package</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">postinst</code></p>
</td>
      <td class="green"><p>Runs <code class="highlighter-rouge">pkg_postinst()</code> function in ebuild, which normally runs after a package is install into the live file system.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild postinst</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">postrm</code></p>
</td>
      <td class="green"><p>Runs <code class="highlighter-rouge">pkg_postrm()</code> function in ebuild, which is normally run after a package is unmerged.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild postrm</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">preinst</code></p>
</td>
      <td class="green"><p>Runs the <code class="highlighter-rouge">pkg_preinst()</code> function which is usually run before the package is installed into the live file system.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild preinst</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">prepare</code></p>
</td>
      <td class="green"><p>Runs <code class="highlighter-rouge">src_prepare()</code> function on extracted sources.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild prepare</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">prerm</code></p>
</td>
      <td class="green"><p>Runs <code class="highlighter-rouge">pkg_prerm()</code>, which is normally before an unmerge is performed.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild prerm</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">qmerge</code></p>
</td>
      <td class="green"><p>This function installs all the files in the install directory to the live file system.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild qmerge</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">rpm</code></p>
</td>
      <td class="green"><p>Builds an RPM binary package from the files in the temporary install directory.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild rpm</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">setup</code></p>
</td>
      <td class="green"><p>Runs the <code class="highlighter-rouge">pkg_setup()</code> function.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild setup</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">test</code></p>
</td>
      <td class="green"><p>Runs the <code class="highlighter-rouge">src_test()</code> function.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild test</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">unmerge</code></p>
</td>
      <td class="green"><p>Removes installed files from the live file system, effectively uninstalling it.</p>
</td>
      <td class="green"><p><code class="highlighter-rouge">ebuild atom-1.3.1.ebuild unmerge</code></p>
</td>
    </tr>
    
  </tbody>
</table>

<p>For details on how to write ebuilds see the <a href="#writing-ebuilds">Writing ebuilds</a> section of this post.</p>

<h4 id="manpages">Manpages</h4>
<ul>
  <li><a href="/man/ebuild.1.html">EBUILD(1) Manpage</a> which describes the <code class="highlighter-rouge">ebuild</code> command.</li>
  <li><a href="/man/ebuild.5.html">EBUILD(5) Manpage</a> which describes the <code class="highlighter-rouge">ebuild</code> format.</li>
</ul>

<h3 id="layman">Layman</h3>
<p><a href="http://layman.sourceforge.net/" link="_blank"><b>Layman</b></a> (<span class="package">app-portage/layman</span>: <a href="https://packages.sabayon.org/quicksearch?q=app-portage/layman&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="https://wiki.gentoo.org/wiki/Project:Layman" link="_blank"><abbr title="Gentoo Project">GP</abbr></a>, <a href="http://gpo.zugaina.org/app-portage/layman" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/app-portage/layman" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/gentoo/layman" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, , <a href="https://wiki.gentoo.org/wiki/Layman" link="_blank"><abbr title="Gentoo Wiki">GW</abbr></a>, )
 is a command-line tool for managing Portage overlays. It can be installed with Portage (from the PT) using the command:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge -av app-portage/layman</div>

<p>or with Entropy using the command:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo i -av app-portage/layman</div>

<p>I would recommend installing Layman using Entropy as it is less error-prone and the Layman package it installs was compiled with all the USE flags required to add every type of overlay available (including Bazaar (bzr), Git, Mercurial (hg) and Subversion (svn)). It is important to note that the Layman packages in the Entropy repositories do not have <code class="highlighter-rouge">dev-vcs/bazaar</code>, <code class="highlighter-rouge">dev-vcs/git</code>, <code class="highlighter-rouge">dev-vcs/mercurial</code> or <code class="highlighter-rouge">dev-vcs/subversion</code> listed amongst its dependencies, which means each of these packages will need to be installed manually in order to add overlays managed by them. If you want to install Layman and these version control systems run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo i -av app-portage/layman dev-vcs/bazaar dev-vcs/git dev-vcs/mercurial dev-vcs/subversion</div>

<p>Layman-added overlays (and the ebuilds contained within them) are stored in <code class="highlighter-rouge">/var/lib/layman/</code>.</p>

<h4 id="layman-syntax">Layman Syntax</h4>
<p>The basic syntax for Layman is:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman [<em>options</em>] [<em>action</em>]</div>

<p>As with emerge, I am not going to cover every option and action available for layman, as that would take too long, plus this is not meant to be a substitute for the manpages of the package managers and other tools covered in this post. Some of the more important/frequently-used actions and options are covered in tables 4 and 5. Please note that all actions when given in long form, if they require input (like <code class="highlighter-rouge">--add</code> does) this input must be specified with an equal sign and no spaces. For example, to add the <a href="https://github.com/Sabayon/for-gentoo"><code class="highlighter-rouge">sabayon</code></a> overlay you may run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman --add=sabayon</div>

<p>or in shortened notation:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -a sabayon</div>

<p>It is important to note that while this technique will add the <code class="highlighter-rouge">sabayon</code> overlay to one’s machine not all overlays can be added this way, as some overlays are not within Layman’s default list of available overlays (which I will henceforth refer to as the <strong>remote list</strong>). To view the remote list, run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -L</div>

<p>while to see the list of overlays currently installed, locally, on your machine run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -l</div>

<p>To add a new overlay that is not within the Layman remote list, run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -o &lt;URL of repository XML file&gt; -f -a &lt;OVERLAY&gt;</div>

<p>For example, for my overlay <a href="https://github.com/fusion809/sabayon-tools"><code class="highlighter-rouge">sabayon-tools</code></a>, you could add it with:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -o https://raw.githubusercontent.com/fusion809/sabayon-tools/master/overlays.xml -f -a sabayon-tools </div>

<p>or as it is now in the Layman remote list (per <a href="https://bugs.gentoo.org/show_bug.cgi?id=566188">Gentoo Bug Report #566188</a>)
 you could add it with:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -a sabayon-tools</div>

<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;"><caption><strong>Table 4: Options for Layman</strong></caption>
  <tbody>
    <tr class="green">
      <td class="title" style="width: 150px;">Long</td>
      <td class="title">Short</td>
      <td class="title">Meaning</td>
    </tr>
    <tr class="green">
      <td class="green">
      <div class="code">--nocolor</div></td>
      <td class="green"><code>-N</code></td>
      <td class="green">Remove colour codes from Layman output.</td>
    </tr>
    <tr class="green">
      <td class="green">
      <div class="code">--quiet</div></td>
      <td class="green"><code>-q</code></td>
      <td class="green">Reduce output.</td>
    </tr>
    <tr class="green">
      <td class="green">
      <div class="code">--quietness</div></td>
      <td class="green"><code>-Q</code></td>
      <td class="green">Takes a numerical value between 0 and 4 to determine the amount of output provided. 0 means no output, 4 means full output.</td>
    </tr>
    <tr class="green">
      <td class="green">
      <div class="code">--verbose</div></td>
      <td class="green"><code>-v</code></td>
      <td class="green">Makes Layman give more output details, such as a description of the overlays you download.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;"><caption><strong>Table 5: Actions for Layman</strong></caption>
<tbody>
<tr class="green">
<td class="title" style="width: 150px;">Long</td>
<td class="title">Short</td>
<td class="title">Meaning</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--add</div></td>
<td class="green"><code>-a</code></td>
<td class="green">Add overlay.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--delete</div></td>
<td class="green"><code>-d</code></td>
<td class="green">Delete overlay. Specify "ALL" to delete all locally installed overlays.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--disable</div></td>
<td class="green"><code>-D</code></td>
<td class="green">Disable overlay. Specify "ALL" to disable all locally-installed overlays.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--info</div></td>
<td class="green"><code>-i</code></td>
<td class="green">Display all available information about the overlay.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--list</div></td>
<td class="green"><code>-L</code></td>
<td class="green">List all available overlays. Note that these overlays are not necessarily installed on your system.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--list-local</div></td>
<td class="green"><code>-l</code></td>
<td class="green">List all locally-installed overlays.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--readd</div></td>
<td class="green"><code>-r</code></td>
<td class="green">Re-add overlay(s) specified, to re-add all overlays, use the input "ALL".</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--sync</div></td>
<td class="green"><code>-s</code></td>
<td class="green">Synchronize (or in other words, update) overlay(s) specified. To sync them all use the input "ALL" or use the
<code>-S</code> option mentioned below.</td>
</tr>
<tr class="green">
<td class="green">
<div class="code">--sync-all</div></td>
<td class="green"><code>-S</code></td>
<td class="green">Update all overlays.</td>
</tr>
</tbody>
</table>

<p><br /></p>
<h3 id="entropy">Entropy</h3>
<div class="image-box" style="width:1366; float: none;">
<figure>
  <img src="https://fusion809.github.io/images/Package-Managers/Rigo-Application-Browser.png" alt="Rigo Application Browser running under KDE Plasma 5" style="width:1366" />
  
    <figcaption align="bottom" style="width:-webkit-calc(1366-5px); float: none;"><p>Rigo Application Browser running under KDE Plasma 5</p>
</figcaption>
  
</figure>
</div>

<p><a href="/man/equo.pdf" link="_blank"><b>Entropy</b></a> (PDF) (<span class="package">sys-apps/entropy</span>: <a href="https://packages.sabayon.org/quicksearch?q=sys-apps/entropy&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/sys-apps/entropy" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/sys-apps/entropy" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/Sabayon/entropy" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, <a href="https://wiki.sabayon.org/index.php?title=En:Entropy" link="_blank"><abbr title="Sabayon Wiki">SW</abbr></a>)
, is a PMS that was specifically designed for Sabayon by Fabio Erculiani, the original creator of Sabayon. Its first unstable release to be added to Sabayon was in July 2008 (although its first unstable release full stop was back in 2007, according to Entropy’s GitHub repository<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>) when <a href="https://forum.sabayon.org/viewtopic.php?f=60&amp;t=13917" target="_blank">Sabayon 3.5 was released</a>
 and its first stable release to be added to Sabayon was made in 2012. Unlike Portage which is primarily designed to install source code packages (although it can also install binary packages), Entropy is designed to work with binary packages only. Binary packages take less time than source code packages to install and requires less user know-how and input. Entropy is also unique in that it has two official front-ends: command-line/textual (<strong>Equo</strong>) and graphical (<strong>Rigo</strong>). I personally favour using the command-line for installing packages on Linux distributions, because in my experience graphical installers are more prone to crashes during installation than their command-line/textual counterparts.</p>

<p>Compared to Portage, Entropy is far more simple to use, if you go to the Entropy Store you can see the USE flags used to compile the software packages provided by Entropy, as all packages provided by Entropy had to be compiled with Portage on another machine first (in <code class="highlighter-rouge">.tbz2</code> format) and then convert from a Portage package to an Entropy package with <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  equo pkg inflate &lt;PACKAGE&gt;</span>.
 Entropy contains packages from the Portage Tree and packages from Sabayon’s own overlays, which are called <a href="https://github.com/Sabayon/for-gentoo"><code class="highlighter-rouge">sabayon</code></a> and <a href="https://github.com/Sabayon/sabayon-distro"><code class="highlighter-rouge">sabayon-distro</code></a>, respectively. Entropy is also safer to use and support for using Entropy to install packages is far better than support for Portage-installed packages on the <a href="https://forum.sabayon.org/">Sabayon forums</a>.</p>

<p>As of December 2015 there are over 13,100 different packages (not including different package versions) in the Entropy repositories. If you want to check how many unique packages (not including differing package versions) are in the official repositories merely run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check the number of unique packages in the sabayonlinux.org</span>
<span class="nb">export </span><span class="nv">SABO</span><span class="o">=</span><span class="k">$(</span><span class="nb">sudo </span>equo query list available <span class="nt">--quiet</span> sabayonlinux.org | <span class="nb">sort</span> | <span class="nb">uniq</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="k">)</span>
<span class="c"># Check the number of unique packages in the sabayon-weekly</span>
<span class="nb">export </span><span class="nv">SABW</span><span class="o">=</span><span class="k">$(</span><span class="nb">sudo </span>equo query list available <span class="nt">--quiet</span> sabayon-weekly | <span class="nb">sort</span> | <span class="nb">uniq</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="k">)</span>
<span class="c"># Check the number of unique packages in the sabayon-limbo</span>
<span class="nb">export </span><span class="nv">SABL</span><span class="o">=</span><span class="k">$(</span><span class="nb">sudo </span>equo query list available <span class="nt">--quiet</span> sabayon-limbo | <span class="nb">sort</span> | <span class="nb">uniq</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="k">)</span>

<span class="nb">echo</span> <span class="s2">"There are </span><span class="k">${</span><span class="nv">SABO</span><span class="k">}</span><span class="s2"> unique packages (not including different package version) in the sabayonlinux.org (DAILY) repository"</span>
<span class="nb">echo</span> <span class="s2">"There are </span><span class="k">${</span><span class="nv">SABW</span><span class="k">}</span><span class="s2"> unique packages (not including different package version) in the sabayon-weekly (WEEKLY) repository"</span>
<span class="nb">echo</span> <span class="s2">"There are </span><span class="k">${</span><span class="nv">SABL</span><span class="k">}</span><span class="s2"> unique packages (not including different package version) in the sabayon-limbo (LIMBO) repository"</span>
</code></pre></div></div>

<h4 id="equo-syntax">Equo Syntax</h4>
<p>The generalized syntax for Entropy’s command-line front-end, Equo, is:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo [<em>action</em>] [<em>options</em>] [<em>ebuild</em> | <em>atom</em>]</div>

<p>Some (but by no stretch of the imagine all) options and actions for Equo are listed in tables 5 and 6, below. Note some options are only available for certain actions, for details see the man pages for Equo and its various actions (e.g., run <code class="highlighter-rouge">man equo install</code> for the equo install manual). One action and another option that are not covered in these tables, that I felt were worthwhile mentioning, are repo and mirrorsort, respectively. The command:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo repo mirrorsort &lt;REPO&gt;</div>

<p>where <code class="highlighter-rouge">&lt;REPO&gt;</code> is the name of an Entropy repository (e.g., <code class="highlighter-rouge">sabayonlinux.org</code>, <code class="highlighter-rouge">sabayon-weekly</code> or <code class="highlighter-rouge">sabayon-limbo</code>), can be used to optimize the order of preference for the repository’s mirrors, hence, potentially, accelerating the process by which Sabayon downloads software packages.</p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;"><caption><strong>Table 6: Options for Equo</strong></caption>
<tbody>
<tr class="green">
<td class="title" style="width: 130px;">Option</td>
<td class="title" style="width: 660px;">Meaning</td>
</tr>
<tr class="green">
<td class="green"><code>-a</code>, <code>--ask</code></td>
<td class="green">Ask before performing actions. For example <code>equo i -a [ebuild]</code> will ask you before it will install the package specified by the <code>ebuild</code> argument.</td>
</tr>
<tr class="green">
<td class="green"><code>--deep</code></td>
<td class="green">Reinstall dependencies, even if unnecessary.</td>
</tr>
<tr class="green">
<td class="green"><code>-h</code>, <code>--help</code>, <code>help</code></td>
<td class="green">Print help information.</td>
</tr>
<tr class="green">
<td class="green"><code>-o</code></td>
<td class="green">If given to the "install" action this option will cause only the package's dependencies to be installed. This is the equivalent to running <code>apt-get build-dep</code> for APT.</td>
</tr>
<tr class="green">
<td class="green"><code>-p</code>, <code>--pretend</code></td>
<td class="green">Show what would be done, had this option not been given.</td>
</tr>
<tr class="green">
<td class="green"><code>--purge</code></td>
<td class="green">(for upgrade) it will remove unmaintained packages, if any.</td>
</tr>
<tr class="green">
<td class="green"><code>-q</code>, <code>--quiet</code></td>
<td class="green">Quiet (reduce) output.</td>
</tr>
<tr class="green">
<td class="green"><code>-v</code>, <code>--verbose</code></td>
<td class="green">Verbose output.</td>
</tr>
</tbody>
</table>

<p><br /></p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;"><caption><strong>Table 7: Actions for Equo</strong></caption>
<tbody>
<tr class="green">
<td class="title">Long</td>
<td class="title">Short</td>
<td class="title">Meaning</td>
<td class="title" style="width: 140px;">Manpage</td>
</tr>
<tr class="green">
<td class="green"><code>cleanup</code></td>
<td class="green">N/A</td>
<td class="green">Remove downloaded packages and clean temporary directories.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-cleanup.1.html.html" link="_blank">equo-cleanup.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>config</code></td>
<td class="green">N/A</td>
<td class="green">Configure installed packages.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-config.1.html.html" link="_blank">equo-config.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>deptest</code></td>
<td class="green"><code>dt</code></td>
<td class="green">Look for unsatisfied dependencies.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-deptest.1.html.html" link="_blank">equo-deptest.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>install</code></td>
<td class="green"><code>i</code></td>
<td class="green">Install software.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-install.1.html.html" link="_blank">equo-install.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>libtest</code></td>
<td class="green"><code>lt</code></td>
<td class="green">Look for missing libraries required by other packages.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-libtest.1.html.html" link="_blank">equo-libtest.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>mask</code></td>
<td class="green">N/A</td>
<td class="green">Mask packages given as input.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-mask.1.html.html" link="_blank">equo-mask.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>remove</code></td>
<td class="green"><code>rm</code></td>
<td class="green">Remove packages given as input.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-remove.1.html.html" link="_blank">equo-remove.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>rescue</code></td>
<td class="green">N/A</td>
<td class="green">Tools to rescue system</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-rescue.1.html.html" link="_blank">equo-rescue.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>search</code></td>
<td class="green"><code>s</code></td>
<td class="green">Search for packages in repositories.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-search.1.html.html" link="_blank">equo-search.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>unmask</code></td>
<td class="green">N/A</td>
<td class="green">Unmask packages given as input.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-unmask.1.html.html" link="_blank">equo-unmask.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>update</code></td>
<td class="green"><code>up</code></td>
<td class="green">Update repositories.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-update.1.html.html" link="_blank">equo-update.1.html</a>
</td>
</tr>
<tr class="green">
<td class="green"><code>upgrade</code></td>
<td class="green"><code>u</code></td>
<td class="green">Upgrade packages that have been updated (in the software repositories) since they were installed, or since you last ran this command.</td>
<td class="green"><a href="https://fusion809.github.io/man/equo-upgrade.1.html.html" link="_blank">equo-upgrade.1.html</a>
</td>
</tr>
</tbody>
</table>

<p>It is important to understand the output of Entropy, for example here is some of the output I obtained on 17 December 2015 when running <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span>  sudo equo upgrade</span>
:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gt">##</span> [<span class="nb">U</span>&lt;/span&gt;] [<span class="y">sabayonlinux.org</span>] <span class="cy">sys-libs</span>/<span class="pack">glibc</span><span class="pckv">-2.21-r1</span>|<span class="r">0</span>   [<span class="pckpv">2.20-r2</span>|<span class="r">0</span>]&lt;/span&gt;
<span class="gt">##</span> [<span class="nb">U</span>&lt;/span&gt;] [<span class="y">sabayon-limbo</span>] <span class="cy">kde-plasma</span>/<span class="pack">kde-cli-tools</span><span class="pckv">-5.5.1</span>|<span class="r">0</span>   [<span class="pckpv">5.5.0</span>|<span class="r">0</span>]&lt;/span&gt;
<span class="gt">## [</span><span class="nb">U</span><span class="gt">]</span> [<span class="y">sabayonlinux.org</span>-&gt;<span class="r">sabayon-limbo</span>] <span class="cy">sys-apps</span>/<span class="pack">grep</span><span class="pckv">-2.22</span>|<span class="r">0</span>   [<span class="pckpv">2.21-r1</span>|<span class="r">0</span>]&lt;/span&gt;
<span class="gt">## [</span><span class="nb">U</span><span class="gt">]</span> [<span class="y">spm-db</span>-&gt;<span class="r">sabayonlinux.org</span>] <span class="cy">net-p2p</span>/<span class="pack">qbittorrent</span><span class="pckv">-3.2.5</span>|<span class="r">0</span>   [<span class="pckpv">3.2.4</span>|<span class="r">9999</span>]&lt;/span&gt;
</code></pre></div>

<p>The first of these lines, indicates that the package <code class="highlighter-rouge">glibc</code> in the <code class="highlighter-rouge">sabayonlinux.org</code> repository was being upgraded from 2.20-r2 to 2.21-r1. Second, that <code class="highlighter-rouge">kde-cli-tools</code> in the <code class="highlighter-rouge">sabayon-limbo</code> repository was being upgraded from 5.5.0 to 5.5.1. Third, that <code class="highlighter-rouge">grep</code> 2.22 was being installed from the <code class="highlighter-rouge">sabayon-limbo</code> repository, over the old version 2.21-r1 that was in the <code class="highlighter-rouge">sabayonlinux.org</code> repository. Forth indicates that <code class="highlighter-rouge">qbittorrent</code> was going to be upgraded to version 3.2.5 in the <code class="highlighter-rouge">sabayonlinux.org</code> repository from the present version 3.2.4 that was installed using Portage (which is what <code class="highlighter-rouge">spm-db</code> indicates).</p>

<p><br /></p>

<h3 id="gentoolkit">Gentoolkit</h3>
<p><b>Gentoolkit</b> (<span class="package">app-portage/gentoolkit</span>: <a href="https://packages.sabayon.org/quicksearch?q=app-portage/gentoolkit&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/app-portage/gentoolkit" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/app-portage/gentoolkit" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/den4ix/gentoolkit" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, , <a href="https://wiki.gentoo.org/wiki/Gentoolkit" link="_blank"><abbr title="Gentoo Wiki">GW</abbr></a>, <a href="https://en.wikipedia.org/wiki/Gentoolkit" link="_blank"><abbr title="Wikipedia">WP</abbr></a>)
 is a suite of tools written in Python and Bash script that make Gentoo administration easier. Examples of these tools include:</p>

<ul>
  <li><a href="/man/eclean.1.html"><code class="highlighter-rouge">eclean</code></a> which can be used to remove old source files and binary packages from one’s system.</li>
  <li><a href="/man/equery.1.html"><code class="highlighter-rouge">equery</code></a> which can be used to query installed packages. For example, it can list the installed files associated with a package, as well as to determine which package an installed file belongs. It can also be used to determine an installed package’s dependencies</li>
  <li><a href="/man/euse.1.html"><code class="highlighter-rouge">euse</code></a> which can be used to set, unset or see USE flags.</li>
  <li><a href="/man/glsa-check.1.html"><code class="highlighter-rouge">glsa-check</code></a> a tool to locally monitor and manage Gentoo Linux Security Advisories (GLSAs).</li>
  <li><a href="/man/revdep-rebuild.1.html"><code class="highlighter-rouge">revdep-rebuild</code></a> which will scan for packages that have become broken as a result of the upgrade of packages they depend on. It will also attempt to fix these problems itself by emerging package dependencies. It will pass all flags to <code class="highlighter-rouge">emerge</code> so <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  revdep-rebuild -p</span>
 will show the packages that would be emerged if the <code class="highlighter-rouge">-p</code> (shortened version of <code class="highlighter-rouge">--pretend</code>) flag was not passed.</li>
</ul>

<p>The Gentoolkit can be installed using Entropy or Portage. Using Entropy one would install it using the command:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo i app-portage/gentoolkit</div>

<p>The Gentoolkit also has a toolkit for Gentoo developers: <b>Gentoolkit-dev</b> (<span class="package">app-portage/gentoolkit-dev</span>: <a href="https://packages.sabayon.org/quicksearch?q=app-portage/gentoolkit-dev&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/app-portage/gentoolkit-dev" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/app-portage/gentoolkit-dev" link="_blank"><abbr title="Portage Tree">PT</abbr></a>).</p>

<h3 id="q-applets">q applets</h3>
<p>The <b>q applets</b> (<span class="package">app-portage/portage-utils</span>: <a href="https://packages.sabayon.org/quicksearch?q=app-portage/portage-utils&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/app-portage/portage-utils" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/app-portage/portage-utils" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/gentoo/portage-utils" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, , <a href="https://wiki.gentoo.org/wiki/Q_applets" link="_blank"><abbr title="Gentoo Wiki">GW</abbr></a>, )
 are a collection of small and fast tools written in <a href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a> and Bash script for the purpose of aiding with Gentoo administration. They are predominantly just faster equivalents to the tools that come bundled with Gentoolkit, although q applets lacks a <code class="highlighter-rouge">glsa-check</code> or <code class="highlighter-rouge">revdep-rebuild</code> equivalent.</p>

<h2 id="mixing-entropy-and-portage">Mixing Entropy and Portage</h2>
<p>By default Entropy and Portage act fairly independently of one another. In order for you to use them together, you must tell Entropy that you are also using Portage to install packages by running:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo rescue spmsync</div>

<p>whenever you emerge, unmerge or update a package. I have this saved in my <code class="highlighter-rouge">~/.bashrc</code> (for root user) as the function <code class="highlighter-rouge">spm</code>, so as to make it easier for me to run it when necessary. What this will do is it will cause packages you installed with Portage to be acknowledged by Entropy, as otherwise Entropy has no clue as to their existence. After this you may also wish to mask packages you installed with Portage, so as to prevent Entropy from attempting to upgrade or remove software installed with Portage. To do this run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo mask &lt;PACKAGE&gt;</div>

<p>To prevent Entropy from downgrading emerged packages you need to edit <code class="highlighter-rouge">/etc/entropy/client.conf</code> and uncomment (removing the hashtag <code class="highlighter-rouge">#</code>) the line <code class="highlighter-rouge">ignore-spm-downgrades = enable</code>.
Packages installed with Entropy are almost always safer (less likely to lead to system breaks or have bugs) than their Portage-installed counterparts, so when you want to install a package with Portage that has several dependencies that are not yet installed, I would suggest you install as many of these dependencies as possible with Entropy before you merge the remaining dependencies and the package itself with Portage. To get Portage to print you a list of the dependencies you need, along with the USE flags they require, run:</p>

<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge -pv &lt;PACKAGE&gt;</div>

<p>Unfortunately there is no Bash script to automate the process of installing Portage package dependencies with Entropy, according to the responses to <a href="https://forum.sabayon.org/viewtopic.php?f=76&amp;t=32603">this forum thread</a> I started.</p>

<h3 id="further-reading">Further Reading</h3>
<ul>
  <li><a href="https://wiki.sabayon.org/index.php?title=HOWTO:_Safely_mix_Entropy_and_Portage">“HOWTO: Safely mix Entropy and Portage” at the Sabayon Wiki</a></li>
</ul>

<h2 id="ebuild-writing">ebuild Writing</h2>

<div class="note">

<div class="note-title">NOTE</div>
<ul>
  <li><em>This section is for advanced users (or those that are interested in attaining this level of understanding) and is mostly based on the <a href="https://devmanual.gentoo.org/">official ebuild writing guide</a>.</em></li>
</ul>


</div>

<p><strong>ebuild writing</strong> and <strong>testing</strong> are two of the most important, yet difficult activities for Gentoo developers to do. Efficient ebuild writing requires a good knowledge of <a href="/2015/11/26/bash-scripting-and-the-command-line-an-introduction-for-sabayon-users/">Bash scripting</a>, which I do not even possess, so bare with me. ebuilds can contain traditional Bash functions and calls to standard POSIX utilities (such as <code class="highlighter-rouge">cp</code> or <code class="highlighter-rouge">mv</code>), as well as specialized ebuild functions, ebuild variables and code snippets. <strong>eclasses</strong> (which are included into an ebuild by a line that starts with <code class="highlighter-rouge">inherit</code>) can add extra functions, variables and code snippets to ebuilds. If you are interested in writing ebuilds I recommend you install <code class="highlighter-rouge">app-portage/eclass-manpages</code> with Entropy by running: <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  equo i app-portage/eclass-manpages</span>
 as this will add manpages (and additional documentation) for the various eclasses to your system. To list the eclass manpages installed with this package, run (assumming you have the <a href="#gentoolkit">Gentoolkit</a> installed): <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span>  equery files app-portage/eclass-manpages | grep /usr/share/man</span>.</p>

<p>ebuilds are so varied in their contents and structure that it is difficult for me to find a reasonable example with which to teach their general structure. This is partly because many ebuilds have components that are specific to them and take up so much space that I do not wish to include them here. This is probably the best ebuild example I can provide (which is in the Portage Tree, its name is <code class="highlighter-rouge">supertux-0.1.3.ebuild</code> and is in the <code class="highlighter-rouge">games-arcade</code> category):</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Copyright 1999-2015 Gentoo Foundation</span>
<span class="c"># Distributed under the terms of the GNU General Public License v2</span>
<span class="c"># $Id$</span>

<span class="nv">EAPI</span><span class="o">=</span>5
<span class="inherit">inherit</span> <span class="ec">eutils games</span>

<span class="nv">DESCRIPTION</span><span class="o">=</span><span class="s2">&quot;A game similar to Super Mario Bros&quot;</span>
<span class="nv">HOMEPAGE</span><span class="o">=</span><span class="s2">&quot;http://super-tux.sourceforge.net&quot;</span>
<span class="nv">SRC_URI</span><span class="o">=</span><span class="s2">&quot;https://supertux.googlecode.com/files/${P}.tar.bz2&quot;</span>

<span class="nv">LICENSE</span><span class="o">=</span><span class="s2">&quot;GPL-2&quot;</span>
<span class="nv">SLOT</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
<span class="nv">KEYWORDS</span><span class="o">=</span><span class="s2">&quot;amd64 ~mips ppc ~ppc64 sparc x86 ~x86-fbsd&quot;</span>
<span class="nv">IUSE</span><span class="o">=</span><span class="s2">&quot;opengl&quot;</span>

<span class="nv">DEPEND</span><span class="o">=</span><span class="s2">&quot;media-libs/libsdl[joystick]</span>
<span class="s2">    media-libs/sdl-image[png,jpeg]</span>
<span class="s2">    media-libs/sdl-mixer[mod,vorbis]</span>
<span class="s2">    x11-libs/libXt&quot;</span>
<span class="nv">RDEPEND</span><span class="o">=</span><span class="k">${DEPEND}</span>

<span class="func">src_prepare</span><span class="o">()</span> <span class="o">{</span>
    <span class="func">epatch</span> <span class="o">\</span>
    <span class="s2">&quot;${FILESDIR}&quot;</span>/<span class="k">${P}</span>-gcc41.patch <span class="o">\</span>
    <span class="s2">&quot;${FILESDIR}&quot;</span>/<span class="k">${P}</span>-ndebug.patch <span class="o">\</span>
    <span class="s2">&quot;${FILESDIR}&quot;</span>/<span class="k">${P}</span>-desktop.patch
<span class="o">}</span>

<span class="func">src_configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="func">egamesconf</span> <span class="o">\</span>
        --disable-debug <span class="o">\</span>
        <span class="s2">$(use_enable opengl)</span>
<span class="o">}</span>

<span class="func">src_install</span><span class="o">()</span> <span class="o">{</span>
    <span class="func">emake</span> <span class="nv">DESTDIR</span><span class="o">=</span><span class="s2">&quot;${D}&quot;</span> <span class="o">\</span>
        <span class="nv">desktopdir</span><span class="o">=</span>/usr/share/applications <span class="o">\</span>
        <span class="nv">icondir</span><span class="o">=</span>/usr/share/pixmaps <span class="o">\</span>
        install
    <span class="func">dodoc</span> AUTHORS ChangeLog LEVELDESIGN README TODO
    <span class="func">prepgamesdirs</span>
<span class="o">}</span>
</code></pre></div>

<p>The header in lines one to three is common to all ebuilds, with the date <code class="highlighter-rouge">1999-2015</code> being adjusted every new year (e.g., in 2016 it will be adjusted to <code class="highlighter-rouge">1999-2016</code>). Lines 5, 8-10, 12-15, 17-21 are where ebuild variables are being defined. They (and other allowed variables) are explained in <strong>table 8</strong>. Table 8 and 9 are essentially modified versions of tables present in the <a href="https://devmanual.gentoo.org/ebuild-writing/variables/index.html">Gentoo Development Guide’s Variables Entry</a>.</p>

<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;">
  <caption><strong><p>Table 8: Basic Variables set in ebuilds</p>
</strong></caption>
  <tbody>
    <tr class="green">
    
      <td class="title"><p>Variable</p>
</td>
    
      <td class="title"><p>Meaning</p>
</td>
    
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/general-concepts/dependencies/index.html"><code class="highlighter-rouge">DEPEND</code></a></p>
</td>
      <td class="green"><p>List of the package’s build dependencies. These dependencies are only required for <strong>building the package</strong>, the <code class="highlighter-rouge">RDEPEND</code> variable provides dependencies that are required to run the program after it is installed.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">DESCRIPTION</code></p>
</td>
      <td class="green"><p>A one-line description of the package. This field is <strong>mandatory</strong>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">DOCS</code></p>
</td>
      <td class="green"><p>An array or space-separated list of documentation files to be installed using the <code class="highlighter-rouge">dodoc</code> function (requires <strong>EAPI≥4.</strong>).</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/variables/index.html#eapi"><code class="highlighter-rouge">EAPI</code></a></p>
</td>
      <td class="green"><p>Portage API version. Allowed values are integers between 0 and 6. Default value is 0.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">HOMEPAGE</code></p>
</td>
      <td class="green"><p>The URL of the package’s home page. It is <strong>mandatory</strong>, except for virtual packages.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/keywording/index.html"><code class="highlighter-rouge">KEYWORDS</code></a></p>
</td>
      <td class="green"><p>Keywords used to indicate package stability on different architecture types. A tilde (<code class="highlighter-rouge">~</code>) before an architecture (e.g., <code class="highlighter-rouge">x86</code>) denotes that while no bugs have been detected on this architecture, but it has not been sufficiently tested for its stability to be certain. No tilde before an architecture indicates that its stability has been established by rigorous testing and usage.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">IUSE</code></p>
</td>
      <td class="green"><p>List of USE flags that are used in the ebuild.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/variables/index.html#license"><code class="highlighter-rouge">LICENSE</code></a></p>
</td>
      <td class="green"><p>The package’s license or licenses, which should exactly correspond (including its case) to a file in <code class="highlighter-rouge">licenses/</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/general-concepts/dependencies/index.html"><code class="highlighter-rouge">RDEPEND</code></a></p>
</td>
      <td class="green"><p>List of the package’s runtime dependencies.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="/man/ebuild.5.html"><code class="highlighter-rouge">RESTRICT</code></a></p>
</td>
      <td class="green"><p>This is a space-delimited list of Portage features that should be disabled or restricted. For example, <code>RESTRICT=&#34;mirror&#34;</code> forces the ebuild to only download the source code from the <code class="highlighter-rouge">SRC_URI</code> (or equivalent) and not try the Gentoo mirrors.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">S</code></p>
</td>
      <td class="green"><p>Path to temporary build directory that is used by <code class="highlighter-rouge">src_compile()</code> and <code class="highlighter-rouge">src_install()</code>. Default is <code class="highlighter-rouge">${WORKDIR}/${P}</code>, should not be manually set unless it is not equal to the default value.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/general-concepts/slotting/index.html"><code class="highlighter-rouge">SLOT</code></a></p>
</td>
      <td class="green"><p>The package’s <code class="highlighter-rouge">SLOT</code>. This is used to install multiple different versions of the same package simultaneously on the same system and is <strong>mandatory</strong>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">SRC_URI</code></p>
</td>
      <td class="green"><p>URL of the source code (usually in archive format like <code class="highlighter-rouge">.tar.gz</code>). Can be in the form of a list. With <strong>EAPI≥2</strong> the output file name of a given URI can be customized using the -&gt; operator.</p>
</td>
    </tr>
    
  </tbody>
</table>

<p>The sixth line, <code class="highlighter-rouge">inherit eutils games</code>, is where eclass functions are inherited (inheriting means make them available to the ebuild). Certain eclasses make extra ebuild-specified variables available for use. For example, the <a href="/man/git-r3.eclass.5.html"><code class="highlighter-rouge">git-r3</code></a> eclass allows for the specification of a <code class="highlighter-rouge">EGIT_REPO_URI</code> variable, which is essentially the same as a <code class="highlighter-rouge">SRC_URI</code> field, except it is for a git repository instead. <strong>Table 9</strong> describes variables that are predefined read-only in nature (that is, they are <strong>not</strong> set in ebuilds, although they can be used in ebuilds).</p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;">
  <caption><strong><p>Table 9: Predefined Read-Only Variables.</p>
</strong></caption>
  <tbody>
    <tr class="green">
    
      <td class="title"><p>Variable</p>
</td>
    
      <td class="title"><p>Meaning</p>
</td>
    
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">P</code></p>
</td>
      <td class="green"><p>Package name and version, excluding its revision, if any. For example, for <code class="highlighter-rouge">app-editors/vim-6.3-r1.ebuild</code>, <code class="highlighter-rouge">P</code> would equal <code class="highlighter-rouge">vim-6.3</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">PN</code></p>
</td>
      <td class="green"><p>Package name only. In the previous example this would be <code class="highlighter-rouge">vim</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">PV</code></p>
</td>
      <td class="green"><p>Package version, excluding revision, if any. In the aforementioned example this would equal <code class="highlighter-rouge">6.3</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">PR</code></p>
</td>
      <td class="green"><p>Package revision, or <code class="highlighter-rouge">r0</code> if no revision exists.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">PVR</code></p>
</td>
      <td class="green"><p>Package version and revision (if any). In the aforementioned example this would be equal to <code class="highlighter-rouge">6.3-r1</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">PF</code></p>
</td>
      <td class="green"><p>Package full name, including version and revision. For example, in the aforementioned example this would equal to <code class="highlighter-rouge">vim-6.3-r1</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">A</code></p>
</td>
      <td class="green"><p>All package source files (excluding those that are unavailable due to USE flag constraints).</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">CATEGORY</code></p>
</td>
      <td class="green"><p>The package’s category, for the previous example this would be <code class="highlighter-rouge">app-editors</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">FILESDIR</code></p>
</td>
      <td class="green"><p>Path to the package’s <code class="highlighter-rouge">files/</code> directory, which usually contains patches.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">WORKDIR</code></p>
</td>
      <td class="green"><p>Path to the ebuild’s root build directory.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">T</code></p>
</td>
      <td class="green"><p>Path to a temporary directory that may be used by the ebuild.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">D</code></p>
</td>
      <td class="green"><p>Path to the temporary install directory.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">ROOT</code></p>
</td>
      <td class="green"><p>Path to the root directory.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><code class="highlighter-rouge">DISTDIR</code></p>
</td>
      <td class="green"><p>Contains the path to the directory where all files fetched are stored.</p>
</td>
    </tr>
    
  </tbody>
</table>

<p>ebuilds also contain their own set of functions, that are specified in <strong>table 10</strong>.</p>
<table class="green" style="width: 100%; border: 1px; padding: 1em; vertical-align: middle;">
  <caption><strong><p>Table 10: Basic ebuild Functions<sup>1</sup></p>
</strong></caption>
  <tbody>
    <tr class="green">
    
      <td class="title"><p>Function</p>
</td>
    
      <td class="title"><p>Meaning</p>
</td>
    
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_pretend/index.html"><code class="highlighter-rouge">pkg_pretend</code></a></p>
</td>
      <td class="green"><p>Run sanity checks for a package during dependency calculation time.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_nofetch/index.html"><code class="highlighter-rouge">pkg_nofetch</code></a></p>
</td>
      <td class="green"><p>Tell the user how to deal with packages that require manual downloading.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_setup/index.html"><code class="highlighter-rouge">pkg_setup</code></a></p>
</td>
      <td class="green"><p>Pre-build environment configuration and checks.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_unpack/index.html"><code class="highlighter-rouge">src_unpack</code></a></p>
</td>
      <td class="green"><p>Extract source packages and perform any necessary patching or fixes. Absolete as of <strong>EAPI≥2</strong>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_prepare/index.html"><code class="highlighter-rouge">src_prepare</code></a></p>
</td>
      <td class="green"><p>Prepare source packages and do any necessary patching or fixes. Used instead of <code class="highlighter-rouge">src_unpack</code> for <strong>EAPI≥2</strong>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_configure/index.html"><code class="highlighter-rouge">src_configure</code></a></p>
</td>
      <td class="green"><p>Configure the source code, requires <strong>EAPI≥2.</strong>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_compile/index.html"><code class="highlighter-rouge">src_compile</code></a></p>
</td>
      <td class="green"><p>Compile the source code, for <strong>EAPI&lt;2.</strong> this function also configures the source code.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_compile/index.html"><code class="highlighter-rouge">src_test</code></a></p>
</td>
      <td class="green"><p>Run pre-install test scripts</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/src_install/index.html"><code class="highlighter-rouge">src_install</code></a></p>
</td>
      <td class="green"><p>Install a package to <code class="highlighter-rouge">${D}</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_preinst/index.html"><code class="highlighter-rouge">pkg_preinst</code></a></p>
</td>
      <td class="green"><p>Called before image is installed to <code class="highlighter-rouge">${ROOT}</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_postinst/index.html"><code class="highlighter-rouge">pkg_postinst</code></a></p>
</td>
      <td class="green"><p>Called after image is installed to <code class="highlighter-rouge">${ROOT}</code>.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_prerm/index.html"><code class="highlighter-rouge">pkg_prerm</code></a></p>
</td>
      <td class="green"><p>Called before a package is unmerged.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_postrm/index.html"><code class="highlighter-rouge">pkg_postrm</code></a></p>
</td>
      <td class="green"><p>Called after a package is unmerged.</p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_config/index.html"><code class="highlighter-rouge">pkg_config</code></a></p>
</td>
      <td class="green"><p>Run any special post-install configuration. Examples of ebuilds with this function in the Portage Tree include <code class="highlighter-rouge">dev-db/postgresql</code></p>
</td>
    </tr>
    
    <tr class="green">
      <td class="green"><p><a href="https://devmanual.gentoo.org/ebuild-writing/functions/pkg_info/index.html"><code class="highlighter-rouge">pkg_info</code></a></p>
</td>
      <td class="green"><p>Display information about the package.</p>
</td>
    </tr>
    
  </tbody>
  <tfoot>
    
    <tr class="green">
      <td class="green" colspan="2"><ol>
  <li>The order of functions in this table is that in which each function is executed by Portage.</li>
</ol>
</td>
    </tr>
    
  </tfoot>
</table>

<p><br /></p>
<h3 id="learning-by-example">Learning by Example</h3>
<p>I personally learn ebuild writing best by trying it out myself, aided by the documentation and guided by specific examples that share similarities with the ebuild I am writing, so in order to aid you in finding example ebuilds I have decided to include this Bash script that can be used to search for them:</p>

<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;grep --include='&#42;.ebuild' -R &quot;&lt;PATTERN&gt;&quot; &lt;DIRECTORY&gt;</div>

<p>In most cases the best value for <code class="highlighter-rouge">&lt;DIRECTORY&gt;</code> would likely be <code class="highlighter-rouge">/usr/portage</code> (the Portage Tree), although for ebuilds found in all the unofficial overlays managed by Layman that have been locally installed on your system, the <code class="highlighter-rouge">&lt;DIRECTORY&gt;</code> variable can be set to <code class="highlighter-rouge">/var/lib/layman</code>. The <code class="highlighter-rouge">&lt;PATTERN&gt;</code> field depends on what you want in the ebuild examples you are searching for. For example:</p>

<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;grep --include='&#42;.ebuild' -R &quot;pkg_config() {&quot; /usr/portage</div>

<p>can be used to search for ebuilds in the Portage Tree with <code class="highlighter-rouge">pkg_config() {</code> appearing in them.</p>

<p>Whenever I feel I am ready to test out an ebuild, to see if it works, what I do is I run:</p>

<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;ebuild &lt;PACKAGE&gt;.ebuild manifest &amp;&amp; ebuild &lt;PACKAGE&gt;.ebuild package</div>

<p>if this command returns errors I go back to the ebuild and look for any errors I may have made, whilst simultaneously looking at the error message I received from <code class="highlighter-rouge">ebuild</code>.</p>

<h3 id="testing-ebuilds">Testing ebuilds</h3>
<p>Usually the way I test out ebuilds is I enter a Sabayon chroot on my PC, build a binary package from the ebuild and if the package is usable from the command-line I install it on the chroot and test it out. To create a Sabayon chroot at <code class="highlighter-rouge">/root2</code> I run:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># This is the best mirror for me, due to my geography. If you want to use this script you should change this variable to the best mirror for you.</span>
<span class="nv">MIRROR</span><span class="o">=</span>ftp://mirror.optusnet.com.au/sabayon
<span class="com">wget</span> <span class="opt">-c</span> <span class="nv">$MIRROR</span>/iso/daily/Sabayon_Linux_DAILY_amd64_tarball.tar.gz
<span class="k">sudo</span> <span class="com">mkdir</span> /root2
<span class="k">sudo</span> <span class="com">cp</span> <span class="opt">-a</span> <span class="s2">&quot;Sabayon_Linux_DAILY_amd64_tarball.tar.gz&quot;</span> /root2
<span class="com">cd</span> /root2
<span class="k">sudo</span> <span class="com">tar</span> <span class="opt">xvzpf</span> Sabayon_Linux_DAILY_amd64_tarball.tar.gz
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-t</span> <span class="act">proc</span> none /root2/proc
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /dev /root2/dev
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /usr/portage /root2/usr/portage
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /usr/src/linux /root2/usr/src/linux
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /lib/modules /root2/lib/modules
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /sys /root2/sys
<span class="k">sudo</span> <span class="com">cp</span> /etc/resolv.conf /root2/etc/resolv.conf
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /tmp /root2/tmp
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">--rbind</span> /dev /root2/dev
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">--rbind</span> /sys /root2/sys
</code></pre></div>

<p>while to change into this chroot I run:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">sudo</span> <span class="com">chroot</span> /root2 /bin/bash</code></pre></div>

<p>When I reboot after setting up a chroot (regardless of its operating system, I have created both Gentoo and Sabayon chroots on my Sabayon machine) I find that it is then broken and will not work (specifically running <code class="highlighter-rouge">emerge</code> in the chroot will return an error mentioned <a href="https://forums.gentoo.org/viewtopic-t-995438-view-previous.html">here</a> on the Gentoo forums). To fix this I run this script:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-t</span> <span class="act">proc</span> none /root2/proc
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /dev /root2/dev
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /usr/portage /root2/usr/portage
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /usr/src/linux /root2/usr/src/linux
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /lib/modules /root2/lib/modules
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /sys /root2/sys
<span class="k">sudo</span> <span class="com">cp</span> /etc/resolv.conf /root2/etc/resolv.conf
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">-o</span> <span class="act">bind</span> /tmp /root2/tmp
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">--rbind</span> /dev /root2/dev
<span class="k">sudo</span> <span class="com">mount</span> <span class="opt">--rbind</span> /sys /root2/sys
</code></pre></div>

<p>while if after rebooting I decide I no longer want to use the chroot I run this to free up memory (as otherwise quite often I will find I do not have enough free RAM to even use several instances of Bash or a single instance of Google Chrome):</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">sudo</span> <span class="com">umount</span> /root2/proc
<span class="k">sudo</span> <span class="com">umount</span> /root2/dev
<span class="k">sudo</span> <span class="com">umount</span> /root2/usr/portage
<span class="k">sudo</span> <span class="com">umount</span> /root2/usr/src/linux
<span class="k">sudo</span> <span class="com">umount</span> /root2/lib/modules
<span class="k">sudo</span> <span class="com">umount</span> /root2/sys
<span class="k">sudo</span> <span class="com">umount</span> /root2/tmp
<span class="k">sudo</span> <span class="com">umount</span> /root2/dev
<span class="k">sudo</span> <span class="com">umount</span> /root2/sys
</code></pre></div>

<p>Other methods for testing ebuilds out do exist, but in my experience they are very tedious and can be quite wasteful (in terms of the bandwidth they chew up). One such method I have tried (and do not intend to use again, due to these limitations) is using Docker, for details on this method see <a href="http://blog.mudler.pm/2015/11/part-1-building-gentoo-and-sabayon.html">Ettore Di Giacinto (mudler)’s Blog Post</a>. Another method, that provides one the ability to perform more extensive tests than building and installing in a chroot, is to build and install the package on a Sabayon Linux Virtual Machine (VM). I have used this method a few times, usually when the package in question is graphical, instead of textual (e.g., my Enlightenment 20 and Moksha ebuilds), which means that I cannot test it out properly in a chroot.</p>

<h2 id="the-algorithm">The Algorithm</h2>
<p>If you come across a program you want to install on your Sabayon machine (and you know it is compatible with Linux systems) the following is an algorithm I would suggest you follow to install it.</p>

<ol>
  <li>Search for the package in the <a href="https://packages.sabayon.org" target="_blank">Entropy Store</a>. If it is there, install it with Entropy (e.g., via running <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo i &lt;PACKAGE&gt;</span>)
, if not, or if the package is unsuitable (due to the USE flags not being set properly) proceed to the next step.</li>
  <li>Search for the program in the <a href="https://packages.gentoo.org" target="_blank">Gentoo Overlay</a>. If it is there, install it with Portage (e.g., via running <span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge -av &lt;PACKAGE&gt;</span>)
, otherwise, or if Portage fails due to errors, move onto the next step, or skip to the final step.</li>
  <li>Search for the program in any of the <a href="http://gpo.zugaina.org/" target="_blank">unofficial overlays</a> found in the Layman remote list. If it is, and the version number is acceptable add the containing overlay with
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -a &lt;OVERLAY&gt;</div>

then sync both Portage and Layman with (I also have this added as a function called <code>sync</code> in my <code>~/.bashrc</code> script)
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge --sync &amp;&amp; layman -S</div>

and then emerge the package with
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge -av &lt;PACKAGE&gt;</div>

otherwise I proceed to the next step. If the package fails to merge properly I may fork the ebuild into my own personal overlay, <a href="https://github.com/fusion809/sabayon-tools" link="_blank"><code>sabayon-tools</code></a>, try to fix it and try to merge it again. Alternatively, if the ebuild version available from an overlay (including the Portage Tree) is lower than that which I want I may also fork the ebuild into my overlay.
<br />
If the package has several dependencies I try to install as many as possible with Entropy, before I emerge the remaining dependencies and <code>&lt;PACKAGE&gt;</code> itself. Often using pretend instead of ask options (<code>emerge -pv...</code> instead of <code>emerge -av...</code>) will be helpful if you want a list of packages to install with Entropy. Sometimes emerge will say you need to adjust your USE flags (stored in <code>/etc/portage/package.use/</code>), package keywords (stored in <code>/etc/portage/package.keywords</code>), list of accepted software licenses (stored in <code>/etc/portage/make.conf</code>) and alike to install the package you want.</li>

  <li>If all else fails, get the source code and try compiling and installing it yourself (be warned, however, this is at least as dangerous as installing the program with Portage. Sometimes you cannot uninstall programs installed manually from source code, as opposed to Entropy and Portage-installed programs which are easy to uninstall). This step is last, because this step is very error prone if, like me, you do not know an awful lot about compiling software or programming, in general. This step depends on the instructions in any INSTALL or README file included with the source code. If these files do not exist I use my knowledge on common compiling methods to install the software. For example, if the source code is written in C/C++ often there will be an <code>autogen.sh</code> or <code>configure</code> file somewhere in the source code base directory, which I will run (usually by opening up a terminal emulator and running <span class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;./&lt;FILE&gt;</span>
 where <code>&lt;FILE&gt;</code>; is either autogen.sh or configure)) and read the output of. If the output includes an error, concerning some missing dependency, I will try to install said dependency (following the same algorithm outlined here) and re-run the autogen.sh/configure script or if the dependency is on my PC already I will try giving the <code>autogen.sh</code> or <code>configure</code> file a <code>PATH</code> variable pointing to the dependency's location on my system when I re-execute them. If no errors are encountered when running these scripts, or I manage to fix them with the methods I just mentioned I then run
  <div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;make<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;sudo make install</div>

  While if the source code is written in Python I look for a setup.py file and run
  <div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;python setup.py install</div>
</li>
  <li>If errors are encountered at any of these steps (by errors I do not include the absence of available software packages as errors) I would also recommend you attempt to seek support. For example, if the failure happened with an added unofficial overlay I would recommend you find the GitHub repository that houses the overlay and create a new issue for said repository. This process of getting support often occurs quite slowly, taking several days, at least, to get any solution to the problem, so if failures happen I would probably move onto the next step of this algorithm (if there are any steps left) before I would report the failures.</li>
</ol>

<h3 id="examples">Examples</h3>
<h4>OpenRA</h4>
<div class="image-box" style="width:1920; float: none;">
<figure>
  <img src="https://fusion809.github.io/images/Games/OpenRA.jpg" alt="An example of OpenRA running" style="width:1920" />
  
    <figcaption align="bottom" style="width:-webkit-calc(1920-5px); float: none;"><p>An example of OpenRA running</p>
</figcaption>
  
</figure>
</div>

<p><a href="http://www.openra.net/" link="_blank"><b>OpenRA</b></a> (<span class="package">games-strategy/openra</span>: <a href="https://packages.sabayon.org/quicksearch?q=games-strategy/openra&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/games-strategy/openra" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/games-strategy/openra" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/OpenRA/OpenRA" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, <a href="https://github.com/OpenRA/OpenRA/wiki" link="_blank"><abbr title="Official Wiki">WK</abbr></a>, <a href="https://en.wikipedia.org/wiki/OpenRA" link="_blank"><abbr title="Wikipedia">WP</abbr></a>)
 is a free and open-source futuristic strategy game. For me, it reminds me of one of my favourite Windows games, <a href="https://en.wikipedia.org/wiki/Outlive">Outlive</a>. OpenRA is unusual in that it is not available in the Entropy Store, although a <a href="https://packages.gentoo.org/packages/games-strategy/openra">few ebuilds</a> for it do exist in the Portage Tree, although it is worthwhile mentioning that these ebuilds are often out of date. For example, as of 26 November 2015 the latest ebuild available in the Portage Tree was for version 20141029 (note how this number represents the date of the release, 29 October 2014), while the latest release was 20150919 (released 19 September 2015). There are unofficial overlays (such as <a href="https://github.com/hasufell/games-overlay"><code class="highlighter-rouge">games-overlay</code></a>) that contain more recent versions of OpenRA, although it was not until 19 October 2015 that an ebuild for 20150919 was added to this overlay.</p>

<p>To install the latest version available of OpenRA on Sabayon one has four main options:</p>
<ol>
<li>Emerge the package from the Portage Tree. This will get you release 20141029, at best. I have not tried this due to how old a version this package is. To do this simply run:
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge games-strategy/openra</div>
</li>
<li><p>Add the <code class="highlighter-rouge">games-overlay</code> with Layman and emerge the latest version available from it, 20150919. To do this run:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -a games-overlay<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge --sync &amp;&amp; layman -S<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge games-strategy/openra-20150919::games-overlay</div>
</li>
<li>Add the <code><a href="https://github.com/cerebrum/dr" link="_blank">dr</a></code> overlay (not available with Layman) and emerge the latest version, 20150919. This option I have not done, due to the fact it needs freetype unmerged and that would break my system. To do this run:
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -o http://github.com/cerebrum/dr/raw/master/repo.xml -f -a dr<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge --sync &amp;&amp; layman -S<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge games-strategy/openra::dr</div>
</li>
<li><p>Compile the source code yourself and install OpenRA from that (which will get you the latest version of OpenRA, 20150919). This option I have succeeded in doing and is how OpenRA is currently installed on my system. To do this I ran:</p>
<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;wget -c https://github.com/OpenRA/OpenRA/archive/release-20150919.tar.gz | tar -xz<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;cd OpenRA-release-20150919<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;make dependencies &amp;&amp; make all</div>

<p>This does not add an executable of OpenRA to <code class="highlighter-rouge">/usr/games/bin/</code> and hence running <code class="highlighter-rouge">openra</code> from the command-line will not start the game. So after this I also created a shell script file called <code class="highlighter-rouge">/usr/games/bin/openra</code> with nano (that is, I ran<span class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span>  nano /usr/games/bin/openra</span>
) with the line <code class="highlighter-rouge">mono --debug /path/to/OpenRA.Game.exe</code> where <code class="highlighter-rouge">/path/to</code> is replaced with the path to where you built OpenRA from source code (which for me is <code class="highlighter-rouge">/home/fusion809/Programs/OpenRA-release-20150919</code>).</p>
</li>
</ol>

<h5 id="external-links">External links</h5>
<ul>
  <li><a href="http://www.openra.net/download/">Download Page</a></li>
  <li><a href="https://github.com/OpenRA/OpenRA/wiki/FAQ">Frequently Ask Questions</a></li>
  <li><a href="http://www.sleipnirstuff.com/forum/viewforum.php?f=80">Official Forums</a></li>
</ul>

<h4 id="supertux">SuperTux</h4>
<div class="image-box" style="width:800; float: none;">
<figure>
  <img src="https://fusion809.github.io/images/Games/Supertux-checkpoint.png" alt="SuperTux 0.3.3" style="width:800" />
  
    <figcaption align="bottom" style="width:-webkit-calc(800-5px); float: none;"><p>SuperTux 0.3.3</p>
</figcaption>
  
</figure>
</div>

<p><a href="http://supertux.github.io/" link="_blank"><b>SuperTux</b></a> (<span class="package">games-arcade/supertux</span>: <a href="https://packages.sabayon.org/quicksearch?q=games-arcade/supertux&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/games-arcade/supertux" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/games-arcade/supertux" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://github.com/SuperTux/supertux" link="_blank"><abbr title="GitHub Repository">GR</abbr></a>, <a href="https://en.wikipedia.org/wiki/SuperTux" link="_blank"><abbr title="Wikipedia">WP</abbr></a>)
 is a free and open-source (licensed under GNU GPLv3) 2D platform game that was first released in April 2003. Its gameplay is very similar to that of the proprietary game, Super Mario Bros. The initial 2003 release was called “Milestone 1” (or if you would prefer a version number 0.1.3) and is the version of SuperTux that is currently available in the Entropy Store and the Portage Tree. I have installed this version with Entropy, using:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;equo i games-arcade/supertux</div>

<p>This game is enjoyable, giving several hours of entertainment for me at least. Despite this, due to my preoccupation with using the latest software available, I looked to install the latest version of SuperTux (which are developmental, but still fairly stable, versions of Milestone 2 (or SuperTux 2) which is due to be released in December 2015). I tried installing it using the unofficial <a href="https://github.com/yarikmsu/yarik-overlay"><code class="highlighter-rouge">yarik-overlay</code></a> and while this succeeded I found the most stable version provided by it (0.3.4) plagued by bugs. To do this I ran:</p>
<div class="console"><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;layman -a yarik-overlay<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge --sync &amp;&amp; layman -S<br /><span class="coder"><abbr title="This command is to be run as root user; to enter root run the su command">root #</abbr></span> &nbsp;emerge -av supertux</div>

<p>So after this, I decided to give manually building and installing it myself, a go. Then I got the <a href="https://github.com/SuperTux/supertux/releases/download/v0.3.5a/supertux-0.3.5a.tar.bz2">latest tarball source code release</a> (<code class="highlighter-rouge">tar -xvf supertux-0.3.5a.tar.bz2</code> should do this from the command-line), decompressed it, changed into the supertux-0.3.5a directory and ran:</p>
<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;mkdir build<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;cd build<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;cmake .. -DCMAKE_INSTALL_PREFIX=/usr<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;make<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;sudo make install</div>

<p>this ran without error and the resulting SuperTux 2 installation (which by-the-way I have managed to keep on my system despite never removing my SuperTux 1 Entropy installation) was less buggy. Later, I replaced this installation with the latest git release of SuperTux, via running:</p>
<div class="console"><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;git clone https://github.com/SuperTux/supertux<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;cd supertux<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;mkdir build &amp;&amp; cd build<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;cmake .. -DCMAKE_INSTALL_PREFIX=/usr<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;make<br /><span class="codeu"><abbr title="This command is to be run as standard, non-root, user">user $</abbr></span> &nbsp;sudo make install</div>

<p>and surprisingly (because git snapshots are usually less stable than tarball pre-releases) it had even fewer bugs than manually compiled SuperTux 0.3.5a. There was one bug that stayed quite persistently, however, after compiling the source code manually — after a while SuperTux2 would not launch (even when run from the command-line) and the error message it gave was related to <code class="highlighter-rouge">SDL_BASEPATH</code> not being set. Reinstalling <code class="highlighter-rouge">libsdl2</code> with Entropy solved this problem, for some reason. In an attempt to overcome this error more permanently I  have created an ebuild for the latest git snapshot of SuperTux (<a href="https://github.com/fusion809/sabayon-tools/blob/master/games-arcade/supertux/supertux-9999"><code>games-arcade/supertux-9999</code></a>),
 installed it, although it seems this has not permanently fixed this problem and occasionally I still have to reinstall <code class="highlighter-rouge">libsdl2</code>.</p>

<h5 id="external-links-1">External links</h5>
<ul>
  <li><a href="https://github.com/SuperTux/supertux/wiki/User-Manual">User Manual</a></li>
</ul>

<h4 id="enlightenment">Enlightenment</h4>
<div class="image-box" style="width:1140px; float: none;">
<figure>
  <img src="https://fusion809.github.io/images/Enlightenment/Enlightenment-20.1.png" alt="Enlightenment 20.1, the latest release of Enlightenment as of 24 December 2015." style="width:1140px" />
  
    <figcaption align="bottom" style="width:-webkit-calc(1140px-5px); float: none;"><p>Enlightenment 20.1, the latest release of Enlightenment as of 24 December 2015.</p>
</figcaption>
  
</figure>
</div>

<p><a href="https://www.enlightenment.org" link="_blank"><b>Enlightenment</b></a> (<span class="package">x11-wm/enlightenment</span>: <a href="https://packages.sabayon.org/quicksearch?q=x11-wm/enlightenment&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/x11-wm/enlightenment" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/x11-wm/enlightenment" link="_blank"><abbr title="Portage Tree">PT</abbr></a>, <a href="https://wiki.gentoo.org/wiki/Enlightenment" link="_blank"><abbr title="Gentoo Wiki">GW</abbr></a>, <a href="https://en.wikipedia.org/wiki/Enlightenment (software)" link="_blank"><abbr title="Wikipedia">WP</abbr></a>)
 is a free and open-source (BSD Licensed) feature-packed window manager that had its initial release in 1997. This initial release was dubbed Enlightenment DR16 and later in December 2012 (after 12 years of development) the DR17 series of Enlightenment had its first stable release. Both series (DR16 and DR17) are still under active, independent development. DR16 releases tend to be lighter weight (taking up less system resources) than their corresponding DR17 releases, although DR17 released are usually more feature-packed and aesthetically pleasing (or at least in my opinion). The DR17 series itself has its own set of branches: E17 (the original stable DR17 release in December 2012), E18 (released December 2013), E19 (released September 2014) and E20 (released November 2015).</p>

<p>As of 24 December 2015 the latest release of the DR16 series is present in the Portage Tree and Entropy repositories, although the E20 branch of the DR17 series is yet to be added to either repository. The latest releases of the Enlightenment libraries (namely 1.16.0 for all of these packages): <b>EFL</b> (<span class="package">dev-libs/efl</span>: <a href="https://packages.sabayon.org/quicksearch?q=dev-libs/efl&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/dev-libs/efl" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/dev-libs/efl" link="_blank"><abbr title="Portage Tree">PT</abbr></a><a href="https://en.wikipedia.org/wiki/Enlightenment_Foundation_Libraries" link="_blank"><abbr title="Wikipedia">WP</abbr></a>),
 <b>elementary</b> (<span class="package">media-libs/elementary</span>: <a href="https://packages.sabayon.org/quicksearch?q=media-libs/elementary&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/media-libs/elementary" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/media-libs/elementary" link="_blank"><abbr title="Portage Tree">PT</abbr></a>),
 <b>evas generic loaders</b> (<span class="package">media-plugins/evas_generic_loaders</span>: <a href="https://packages.sabayon.org/quicksearch?q=media-plugins/evas_generic_loaders&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/media-plugins/evas_generic_loaders" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/media-plugins/evas_generic_loaders" link="_blank"><abbr title="Portage Tree">PT</abbr></a>)
 and <b>emotion generic players</b> (<span class="package">media-plugins/emotion_generic_players</span>: <a href="https://packages.sabayon.org/quicksearch?q=media-plugins/emotion_generic_players&amp;x=0&amp;y=0" link="_blank"><abbr title="Entropy Store">ES</abbr></a>, <a href="http://gpo.zugaina.org/media-plugins/emotion_generic_players" link="_blank"><abbr title="Gentoo Portage Overlays">GPO</abbr></a>, <a href="https://packages.gentoo.org/packages/media-plugins/emotion_generic_players" link="_blank"><abbr title="Portage Tree">PT</abbr></a>),
 are also missing from the Portage Tree and Entropy repositories. I wanted to try out Enlightenment 20 (E20) on my Sabayon machine, to do so I had two options:</p>

<ul>
  <li>Manually compile and install E20 and the latest Enlightenment libraries from source code.</li>
  <li>Write my own ebuilds for each package and use them to install E20 and its dependencies missing from the Entropy repositories, which are the Enlightenment libraries.</li>
</ul>

<p>I originally opted for the first of these two options, but I eventually decided to give the second option a try as it would help other users of Gentoo-based Linux distributions such as Sabayon, due to the fact I would keep these ebuilds in my <a href="https://github.com/fusion809/sabayon-tools"><code class="highlighter-rouge">sabayon-tools</code></a> overlay. To write the required ebuilds I essentially bumped the ebuilds already present in the Portage Tree, namely (where → indicates the bumping I did):</p>

<ul>
  <li><code class="highlighter-rouge">dev-libs/efl-1.15.2</code> → <code class="highlighter-rouge">dev-libs/efl-1.16.0</code></li>
  <li><code class="highlighter-rouge">media-libs/elementary-1.15.2</code> → <code class="highlighter-rouge">media-libs/elementary-1.16.0</code></li>
  <li><code class="highlighter-rouge">media-plugins/emotion_generic_players-1.15.0</code> → <code class="highlighter-rouge">media-plugins/emotion_generic_players-1.16.0</code></li>
  <li><code class="highlighter-rouge">media-plugins/evas_generic_loaders-1.15.0</code> → <code class="highlighter-rouge">media-plugins/evas_generic_loaders-1.16.0</code></li>
  <li><code class="highlighter-rouge">x11-wm/enlightenment-0.19.12</code> → <code class="highlighter-rouge">x11-wm/enlightenment-0.20.0</code> → <code class="highlighter-rouge">x11-wm/enlightenment-0.20.1</code></li>
</ul>

<p>tested them out in a Sabayon chroot and made the adjustments that seemed necessary in order for them to build correctly. One adjustment I made to all of them is to set the  <code class="highlighter-rouge">RESTRICT="mirror"</code> variable, as not one of these packages are hosted by the Gentoo mirrors yet. I also noticed that I needed to adjust the USE flags of <code class="highlighter-rouge">dev-libs/efl-1.16.0</code> in order for it to build properly. After making these adjustments all five packages are building fine and I even had a Gentoo user on the <a href="irc://irc.freenode.net/#gentoo"><span class="irc">#gentoo</span></a>
 IRC channel build them successfully on their system.</p>

<h2 id="acknowledgements">Acknowledgements</h2>
<p>I would like to thank pontiki from the <a href="irc://irc.freenode.net/#jekyll"><span class="irc">#jekyll</span></a>
 channel for some help with the formatting of this post and floppym from the <a href="irc://irc.freenode.net/#gentoo-dev-help"><span class="irc">#gentoo-dev-help</span></a>
 channel for providing the Bash script for use searching the Portage Tree for specific examples.</p>

<h2 id="footnotes">Footnotes</h2>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>This is copied mostly from the <a href="https://en.wikipedia.org/wiki/Package_manager">English Wikipedia</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Specifically the <a href="/man/emerge.1.html">emerge.1.html</a> manpage <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Source: <a href="https://github.com/Sabayon/entropy/releases?after=0.6.9">Entropy releases before 0.6.9</a> <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
  <div class="footer-col-wrapper">
    <span style="width:550px;" class="footer-col footer-col-2">
      <b class="site-title" style="font-size:25px;">The Hornery</b> <span style="font-size:12px;">(<a href="https://github.com/fusion809/fusion809.github.io" link="_blank">source</a>)</span>
      <p>Where Brenton (fusion809) stores his thoughts, tutorials and news relating to technology.</p>
    </span>

    <span class="footer-col footer-col-2" style="width:550px">
      <ul class="contact-list">
        <li>Like reading <i>The Hornery</i>? Star us on <a href="https://github.com/fusion809/fusion809.github.io">GitHub</a>!</li>
        <li>Got corrections or improvement ideas? Great, <a href="/contributing/">Tell me!</a></li>
        <li>Want notifications on new posts? Like us on <a href="https://www.facebook.com/sabayon.blog.77/">Facebook</a> or follow our <a href="/feed">Atom feed</a>.</li>
      </ul>
    </span>

    <span class="footer-col footer-col-3" style="width:230px;">
      <ul class="social-media-list">
        

        
        <li>
          <a href="https://www.facebook.com/sabayon.blog.77"><span class="icon icon--twitter"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   id="svg2"
   version="1.1"
   inkscape:version="0.91 r13725"
   xml:space="preserve"
   width="333.61624"
   height="333.61749"
   viewBox="0 0 333.61624 333.61749"
   sodipodi:docname="FB-logo.svg"><metadata
     id="metadata8"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
     id="defs6" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="677"
     inkscape:window-height="480"
     id="namedview4"
     showgrid="false"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:zoom="0.37012621"
     inkscape:cx="230.33798"
     inkscape:cy="-37.449297"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="0"
     inkscape:current-layer="g12" /><g
     id="g10"
     inkscape:groupmode="layer"
     inkscape:label="ink_ext_XXXXXX"
     transform="matrix(1.25,0,0,-1.25,-376.24988,501.82961)"><g
       id="g12"
       transform="matrix(0.1,0,0,0.1,274.50095,320.43125)"><path
         d="m 2786.6195,-1858.6156 c 81.35,0 147.3,65.95 147.3,147.3 l 0,2374.33997 c 0,81.37 -65.95,147.30001 -147.3,147.30001 l -2374.31998,0 c -81.38,0 -147.31,-65.93001 -147.31,-147.30001 l 0,-2374.33997 c 0,-81.35 65.93,-147.3 147.31,-147.3 l 2374.31998,0"
         style="fill:#3d529e;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path46"
         inkscape:connector-curvature="0" /><path
         d="m 2106.5095,-1858.6156 0,1033.54997 346.92,0 51.94,402.8 -398.86,0 0,257.17 c 0,116.620004 32.38,196.090004 199.62,196.090004 l 213.3,0.1 0,360.259996 c -36.91,4.9 -163.51,15.87 -310.81,15.87 -307.53,0 -518.07,-187.71 -518.07,-532.44 l 0,-297.05 -347.81,0 0,-402.8 347.81,0 0,-1033.54997 415.96,0"
         style="fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path48"
         inkscape:connector-curvature="0" /></g></g></svg></span><span class="username">&nbsp;The Hornery</span></a>

        </li>
        

        

        
        <li>
          <a href="https://github.com/fusion809"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">fusion809</span></a>

        </li>
        

        

        
      </ul>
    </span>

    <span class="copyright footer-col">
      <p></p>
    </span>
  </div>

</div>

</footer>


  </body>
</html>
